[{"filePath":"C:\\Users\\Mwitw\\OneDrive\\Documents\\GitHub\\Projects\\frontend\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Mwitw\\OneDrive\\Documents\\GitHub\\Projects\\frontend\\postcss.config.cjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Mwitw\\OneDrive\\Documents\\GitHub\\Projects\\frontend\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Mwitw\\OneDrive\\Documents\\GitHub\\Projects\\frontend\\src\\components\\Auth\\Login.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[856,859],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[856,859],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { authService } from '../../services/authService';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Loader2, AlertCircle } from 'lucide-react';\r\n\r\nexport const Login = () => {\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const navigate = useNavigate();\r\n\r\n    const [totpCode, setTotpCode] = useState('');\r\n    const [showTotp, setShowTotp] = useState(false);\r\n\r\n    const handleLogin = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        setError('');\r\n        try {\r\n            await authService.login(username, password, totpCode);\r\n            window.location.href = '/';\r\n        } catch (err: any) {\r\n            // Check for TOTP requirement\r\n            if (err.response?.status === 401 && (\r\n                err.response?.data?.detail === \"TOTP code required\" ||\r\n                err.response?.headers['x-totp-required'] === \"true\"\r\n            )) {\r\n                setShowTotp(true);\r\n                setError('Please enter your 2FA code.');\r\n            } else {\r\n                setError(err.response?.data?.detail || 'Login failed.');\r\n            }\r\n            console.error(err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-[60vh] flex items-center justify-center\">\r\n            <div className=\"bg-fintech-card border border-fintech-border p-8 rounded-xl w-full max-w-md shadow-2xl shadow-black/50\">\r\n                <div className=\"mb-8 text-center\">\r\n                    <h2 className=\"text-3xl font-bold bg-gradient-to-r from-fintech-primary to-fintech-success bg-clip-text text-transparent mb-2\">\r\n                        Welcome Back\r\n                    </h2>\r\n                    <p className=\"text-fintech-text-muted text-sm\">Enter your credentials to access the terminal</p>\r\n                </div>\r\n\r\n                {error && (\r\n                    <div className=\"bg-fintech-error/10 border border-fintech-error/20 text-fintech-error p-3 rounded mb-6 text-sm flex items-center gap-2\">\r\n                        <AlertCircle className=\"w-4 h-4\" />\r\n                        {error}\r\n                    </div>\r\n                )}\r\n\r\n                <form onSubmit={handleLogin} className=\"space-y-5\">\r\n                    <div>\r\n                        <label className=\"block text-fintech-text-secondary text-sm font-medium mb-1.5\">Username</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            value={username}\r\n                            onChange={(e) => setUsername(e.target.value)}\r\n                            className=\"w-full bg-fintech-bg border border-fintech-border rounded-lg px-4 py-2.5 text-fintech-text-primary focus:outline-none focus:border-fintech-primary focus:ring-1 focus:ring-fintech-primary transition-colors placeholder:text-fintech-text-muted/50\"\r\n                            placeholder=\"Enter username\"\r\n                            required\r\n                        />\r\n                        {showTotp && (\r\n                            <div className=\"animate-fade-in\">\r\n                                <label className=\"block text-fintech-text-secondary text-sm font-medium mb-1.5\">2FA Code</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={totpCode}\r\n                                    onChange={(e) => setTotpCode(e.target.value.replace(/\\D/g, ''))}\r\n                                    className=\"w-full bg-fintech-bg border border-fintech-border rounded-lg px-4 py-2.5 text-fintech-text-primary focus:outline-none focus:border-fintech-primary focus:ring-1 focus:ring-fintech-primary transition-colors tracking-widest text-center font-mono\"\r\n                                    placeholder=\"000 000\"\r\n                                    maxLength={6}\r\n                                    autoFocus\r\n                                />\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"block text-fintech-text-secondary text-sm font-medium mb-1.5\">Password</label>\r\n                        <input\r\n                            type=\"password\"\r\n                            value={password}\r\n                            onChange={(e) => setPassword(e.target.value)}\r\n                            className=\"w-full bg-fintech-bg border border-fintech-border rounded-lg px-4 py-2.5 text-fintech-text-primary focus:outline-none focus:border-fintech-primary focus:ring-1 focus:ring-fintech-primary transition-colors placeholder:text-fintech-text-muted/50\"\r\n                            placeholder=\"ΓÇóΓÇóΓÇóΓÇóΓÇóΓÇóΓÇóΓÇó\"\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={loading}\r\n                        className=\"w-full bg-fintech-primary hover:bg-fintech-primary-dark text-fintech-bg font-bold py-2.5 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-[0_0_15px_rgba(56,189,248,0.2)] hover:shadow-[0_0_20px_rgba(56,189,248,0.4)]\"\r\n                    >\r\n                        {loading ? <Loader2 className=\"animate-spin w-4 h-4\" /> : 'Access Terminal'}\r\n                    </button>\r\n                </form>\r\n                <div className=\"mt-6 text-center\">\r\n                    <button onClick={() => navigate('/register')} className=\"text-fintech-text-muted hover:text-fintech-primary text-sm transition-colors\">\r\n                        New user? Create an account\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Mwitw\\OneDrive\\Documents\\GitHub\\Projects\\frontend\\src\\components\\Auth\\Register.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Mwitw\\OneDrive\\Documents\\GitHub\\Projects\\frontend\\src\\components\\Auth\\TOTPSetup.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":19,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[743,746],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[743,746],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1037,1040],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1037,1040],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":46,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1622,1625],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1622,1625],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { authService } from '../../services/authService';\r\nimport { Shield, CheckCircle } from 'lucide-react';\r\n\r\nexport const TOTPSetup = () => {\r\n    const [step, setStep] = useState<'init' | 'scan' | 'verified'>('init');\r\n    const [qrCode, setQrCode] = useState<string>('');\r\n    const [secret, setSecret] = useState<string>('');\r\n    const [code, setCode] = useState('');\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const startSetup = async () => {\r\n        try {\r\n            setError(null);\r\n            const data = await authService.setupTOTP();\r\n            setQrCode(data.qr_code);\r\n            setSecret(data.secret);\r\n            setStep('scan');\r\n        } catch (err: any) {\r\n            setError(err.response?.data?.detail || 'Failed to start setup');\r\n        }\r\n    };\r\n\r\n    const verifyCode = async () => {\r\n        try {\r\n            setError(null);\r\n            await authService.verifyTOTP(code);\r\n            setStep('verified');\r\n        } catch (err: any) {\r\n            setError(err.response?.data?.detail || 'Invalid code');\r\n        }\r\n    };\r\n\r\n    const disable2FA = async () => {\r\n        try {\r\n            // Usually requires code, but if we are verified we might need re-auth?\r\n            // For now, assume disable needs a code too.\r\n            if (!code) {\r\n                setError(\"Please enter a code to confirm disable\");\r\n                return;\r\n            }\r\n            await authService.disableTOTP(code);\r\n            setStep('init');\r\n            setQrCode('');\r\n            setCode('');\r\n        } catch (err: any) {\r\n            setError(err.response?.data?.detail || 'Failed to disable 2FA');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-white p-6 rounded-lg shadow-sm border border-gray-100 max-w-md mx-auto\">\r\n            <div className=\"flex items-center gap-3 mb-4\">\r\n                <Shield className=\"w-6 h-6 text-blue-600\" />\r\n                <h2 className=\"text-xl font-bold text-gray-900\">Two-Factor Authentication</h2>\r\n            </div>\r\n\r\n            {step === 'init' && (\r\n                <div className=\"space-y-4\">\r\n                    <p className=\"text-gray-600 text-sm\">\r\n                        Secure your account by enabling 2FA. You will need an authenticator app like Google Authenticator or Authy.\r\n                    </p>\r\n                    <button\r\n                        onClick={startSetup}\r\n                        className=\"w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700\"\r\n                    >\r\n                        Enable 2FA\r\n                    </button>\r\n                    {error && <p className=\"text-red-500 text-sm\">{error}</p>}\r\n                </div>\r\n            )}\r\n\r\n            {step === 'scan' && (\r\n                <div className=\"space-y-4 animate-fade-in\">\r\n                    <div className=\"text-center\">\r\n                        <img src={qrCode} alt=\"TOTP QR Code\" className=\"mx-auto border p-2 rounded-lg\" />\r\n                        <p className=\"text-xs text-gray-500 mt-2 font-mono break-all\">{secret}</p>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Enter Verification Code</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            className=\"w-full text-center tracking-widest text-lg p-2 border rounded-md\"\r\n                            placeholder=\"000000\"\r\n                            maxLength={6}\r\n                            value={code}\r\n                            onChange={(e) => setCode(e.target.value.replace(/\\D/g, ''))}\r\n                        />\r\n                    </div>\r\n\r\n                    <button\r\n                        onClick={verifyCode}\r\n                        className=\"w-full bg-green-600 text-white py-2 rounded-md hover:bg-green-700 flex items-center justify-center gap-2\"\r\n                    >\r\n                        Verify & Enable\r\n                    </button>\r\n\r\n                    <button onClick={() => setStep('init')} className=\"text-sm text-gray-500 w-full text-center hover:underline\">\r\n                        Cancel\r\n                    </button>\r\n\r\n                    {error && <p className=\"text-red-500 text-sm text-center\">{error}</p>}\r\n                </div>\r\n            )}\r\n\r\n            {step === 'verified' && (\r\n                <div className=\"text-center space-y-4 animate-fade-in\">\r\n                    <CheckCircle className=\"w-16 h-16 text-green-500 mx-auto\" />\r\n                    <h3 className=\"text-lg font-semibold text-green-700\">2FA Enabled</h3>\r\n                    <p className=\"text-sm text-gray-600\">Your account is now secured with two-factor authentication.</p>\r\n\r\n                    <div className=\"border-t pt-4 mt-4\">\r\n                        <p className=\"text-xs text-gray-400 mb-2\">Need to disable it?</p>\r\n                        <input\r\n                            type=\"text\"\r\n                            className=\"w-full text-center tracking-widest text-lg p-2 border rounded-md mb-2\"\r\n                            placeholder=\"Enter Code to Disable\"\r\n                            maxLength={6}\r\n                            value={code}\r\n                            onChange={(e) => setCode(e.target.value.replace(/\\D/g, ''))}\r\n                        />\r\n                        <button\r\n                            onClick={disable2FA}\r\n                            className=\"text-red-600 text-sm hover:underline\"\r\n                        >\r\n                            Disable 2FA\r\n                        </button>\r\n                        {error && <p className=\"text-red-500 text-sm\">{error}</p>}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Mwitw\\OneDrive\\Documents\\GitHub\\Projects\\frontend\\src\\components\\BondPricer.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1207,1210],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1207,1210],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { TrendingUp, Loader2, AlertCircle } from 'lucide-react';\r\nimport { valuationAPI } from '../services/api';\r\n\r\ninterface BondResult {\r\n    price: number;\r\n    macaulay_duration?: number;\r\n    modified_duration?: number;\r\n}\r\n\r\nexport const BondPricer = () => {\r\n    const [formData, setFormData] = useState({\r\n        face_value: 100,\r\n        coupon_rate: 0.10,\r\n        yield_rate: 0.12,\r\n        years_to_maturity: 5,\r\n        frequency: 2,\r\n    });\r\n\r\n    const [result, setResult] = useState<BondResult | null>(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n\r\n    const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = e.target;\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            [name]: parseFloat(value) || 0,\r\n        }));\r\n    };\r\n\r\n    const handlePriceBond = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        setError('');\r\n        setResult(null);\r\n\r\n        try {\r\n            const data = await valuationAPI.bondPrice(formData);\r\n            setResult(data);\r\n        } catch (err: any) {\r\n            setError(err.response?.data?.detail || 'Failed to price bond');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-white/5 border border-white/10 rounded-2xl p-8 backdrop-blur-sm\">\r\n            <div className=\"flex items-center gap-3 mb-6\">\r\n                <TrendingUp className=\"w-6 h-6 text-blue-400\" />\r\n                <h2 className=\"text-2xl font-bold text-white\">Bond Pricing Calculator</h2>\r\n            </div>\r\n\r\n            <form onSubmit={handlePriceBond} className=\"space-y-6\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-slate-300 mb-2\">\r\n                            Face Value (K)\r\n                        </label>\r\n                        <input\r\n                            type=\"number\"\r\n                            name=\"face_value\"\r\n                            value={formData.face_value}\r\n                            onChange={handleInputChange}\r\n                            step=\"0.01\"\r\n                            className=\"w-full bg-white/10 border border-white/20 rounded-lg px-4 py-2 text-white placeholder-slate-400 focus:outline-none focus:border-blue-400\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-slate-300 mb-2\">\r\n                            Coupon Rate (% p.a.)\r\n                        </label>\r\n                        <input\r\n                            type=\"number\"\r\n                            name=\"coupon_rate\"\r\n                            value={formData.coupon_rate * 100}\r\n                            onChange={(e) => setFormData(prev => ({\r\n                                ...prev,\r\n                                coupon_rate: parseFloat(e.target.value) / 100 || 0,\r\n                            }))}\r\n                            step=\"0.01\"\r\n                            className=\"w-full bg-white/10 border border-white/20 rounded-lg px-4 py-2 text-white placeholder-slate-400 focus:outline-none focus:border-blue-400\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-slate-300 mb-2\">\r\n                            Yield Rate (% p.a.)\r\n                        </label>\r\n                        <input\r\n                            type=\"number\"\r\n                            name=\"yield_rate\"\r\n                            value={formData.yield_rate * 100}\r\n                            onChange={(e) => setFormData(prev => ({\r\n                                ...prev,\r\n                                yield_rate: parseFloat(e.target.value) / 100 || 0,\r\n                            }))}\r\n                            step=\"0.01\"\r\n                            className=\"w-full bg-white/10 border border-white/20 rounded-lg px-4 py-2 text-white placeholder-slate-400 focus:outline-none focus:border-blue-400\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-slate-300 mb-2\">\r\n                            Years to Maturity\r\n                        </label>\r\n                        <input\r\n                            type=\"number\"\r\n                            name=\"years_to_maturity\"\r\n                            value={formData.years_to_maturity}\r\n                            onChange={handleInputChange}\r\n                            step=\"0.5\"\r\n                            className=\"w-full bg-white/10 border border-white/20 rounded-lg px-4 py-2 text-white placeholder-slate-400 focus:outline-none focus:border-blue-400\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-slate-300 mb-2\">\r\n                            Payment Frequency (times/year)\r\n                        </label>\r\n                        <select\r\n                            name=\"frequency\"\r\n                            value={formData.frequency}\r\n                            onChange={(e) => setFormData(prev => ({\r\n                                ...prev,\r\n                                frequency: parseInt(e.target.value),\r\n                            }))}\r\n                            className=\"w-full bg-white/10 border border-white/20 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-400\"\r\n                        >\r\n                            <option value={1}>Annual (1)</option>\r\n                            <option value={2}>Semi-annual (2)</option>\r\n                            <option value={4}>Quarterly (4)</option>\r\n                            <option value={12}>Monthly (12)</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <button\r\n                    type=\"submit\"\r\n                    disabled={loading}\r\n                    className=\"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white font-semibold py-3 rounded-lg hover:from-blue-600 hover:to-blue-700 disabled:opacity-50 transition flex items-center justify-center gap-2\"\r\n                >\r\n                    {loading ? (\r\n                        <>\r\n                            <Loader2 className=\"w-5 h-5 animate-spin\" />\r\n                            Calculating...\r\n                        </>\r\n                    ) : (\r\n                        'Calculate Bond Price'\r\n                    )}\r\n                </button>\r\n            </form>\r\n\r\n            {error && (\r\n                <div className=\"mt-6 bg-red-500/10 border border-red-500/30 rounded-lg p-4 flex items-gap-3\">\r\n                    <AlertCircle className=\"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5\" />\r\n                    <div className=\"text-red-200 text-sm\">{error}</div>\r\n                </div>\r\n            )}\r\n\r\n            {result && (\r\n                <div className=\"mt-8 bg-gradient-to-br from-green-500/10 to-blue-500/10 border border-green-500/30 rounded-xl p-6\">\r\n                    <h3 className=\"text-lg font-semibold text-white mb-6\">Pricing Results</h3>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                        <div className=\"bg-white/5 rounded-lg p-4\">\r\n                            <div className=\"text-sm text-slate-400 mb-1\">Bond Price</div>\r\n                            <div className=\"text-3xl font-bold text-green-400\">\r\n                                K{result.price.toFixed(2)}\r\n                            </div>\r\n                            <div className=\"text-xs text-slate-500 mt-2\">\r\n                                {result.price > formData.face_value ? 'Premium' : 'Discount'} Bond\r\n                            </div>\r\n                        </div>\r\n\r\n                        {result.macaulay_duration && (\r\n                            <div className=\"bg-white/5 rounded-lg p-4\">\r\n                                <div className=\"text-sm text-slate-400 mb-1\">Macaulay Duration</div>\r\n                                <div className=\"text-3xl font-bold text-blue-400\">\r\n                                    {result.macaulay_duration.toFixed(2)} yrs\r\n                                </div>\r\n                                <div className=\"text-xs text-slate-500 mt-2\">Weighted avg time to cash flows</div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {result.modified_duration && (\r\n                            <div className=\"bg-white/5 rounded-lg p-4\">\r\n                                <div className=\"text-sm text-slate-400 mb-1\">Modified Duration</div>\r\n                                <div className=\"text-3xl font-bold text-purple-400\">\r\n                                    {result.modified_duration.toFixed(2)} yrs\r\n                                </div>\r\n                                <div className=\"text-xs text-slate-500 mt-2\">Interest rate sensitivity</div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Mwitw\\OneDrive\\Documents\\GitHub\\Projects\\frontend\\src\\components\\Dashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Mwitw\\OneDrive\\Documents\\GitHub\\Projects\\frontend\\src\\components\\MarketPulse.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":19,"column":168,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":171,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[749,752],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[749,752],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":89,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":89,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4346,4349],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4346,4349],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":127,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":127,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5937,5940],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5937,5940],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":190,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":190,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8465,8468],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8465,8468],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":195,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":195,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8841,8844],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8841,8844],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":195,"column":82,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":195,"endColumn":85,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8849,8852],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8849,8852],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":300,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":300,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14427,14430],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14427,14430],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":341,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":341,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16870,16873],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16870,16873],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useRef } from 'react';\r\nimport { Activity, DollarSign, Loader2, Download, FileSpreadsheet, ChevronDown } from 'lucide-react';\r\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\r\nimport { cn } from '../lib/utils';\r\n\r\n\r\n\r\n\r\nconst mockData = [\r\n    { name: '9:00', value: 400 },\r\n    { name: '10:00', value: 300 },\r\n    { name: '11:00', value: 450 },\r\n    { name: '12:00', value: 470 },\r\n    { name: '13:00', value: 400 },\r\n    { name: '14:00', value: 300 },\r\n    { name: '15:00', value: 400 },\r\n];\r\n\r\nconst TickerCard = ({ ticker, name, price, change, sector, history, onClick }: { ticker: string, name: string, price: number, change: number, sector: string, history: any[], onClick: () => void }) => (\r\n    <div\r\n        onClick={onClick}\r\n        className=\"bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-md border border-white/20 rounded-xl p-5 shadow-xl hover:scale-[1.03] hover:border-brand-primary/50 hover:shadow-brand-primary/20 transition-all duration-300 cursor-pointer group relative overflow-hidden\"\r\n    >\r\n        {/* Glow effect on hover */}\r\n        <div className=\"absolute inset-0 bg-gradient-to-r from-brand-primary/0 via-brand-primary/5 to-brand-primary/0 opacity-0 group-hover:opacity-100 transition-opacity duration-500\" />\r\n\r\n        <div className=\"relative z-10\">\r\n            <div className=\"flex justify-between items-start mb-3\">\r\n                <div>\r\n                    <h3 className=\"text-xl font-bold text-white group-hover:text-brand-primary transition-colors\">{ticker}</h3>\r\n                    <p className=\"text-xs text-slate-400 truncate w-32\" title={name}>{name}</p>\r\n                    <div className=\"mt-1.5\">\r\n                        <span className=\"text-[10px] uppercase tracking-wider bg-white/5 px-2 py-0.5 rounded text-slate-400\">{sector}</span>\r\n                    </div>\r\n                </div>\r\n                <div className=\"text-right\">\r\n                    <span className={cn(\"px-2.5 py-1 rounded-full text-xs font-semibold inline-flex items-center gap-1\",\r\n                        change >= 0 ? \"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30\" : \"bg-rose-500/20 text-rose-400 border border-rose-500/30\"\r\n                    )}>\r\n                        {change >= 0 ? 'Γåæ' : 'Γåô'} {change > 0 ? \"+\" : \"\"}{change.toFixed(2)}%\r\n                    </span>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Price - Main Focus */}\r\n            <div className=\"bg-black/20 rounded-lg px-3 py-2 mb-3\">\r\n                <div className=\"text-xs text-slate-500 mb-0.5\">Current Price</div>\r\n                <div className=\"flex items-baseline gap-2\">\r\n                    <span className=\"text-3xl font-extrabold text-white tracking-tight\">\r\n                        {price != null ? `K${price.toFixed(2)}` : '---'}\r\n                    </span>\r\n                    <span className=\"text-xs text-slate-500\">ZMW</span>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Sparkline Chart */}\r\n            <div className=\"h-14 -mx-1 opacity-80 group-hover:opacity-100 transition-opacity\">\r\n                {history && history.length > 0 ? (\r\n                    <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                        <LineChart data={history}>\r\n                            <Line\r\n                                type=\"monotone\"\r\n                                dataKey=\"value\"\r\n                                stroke={change >= 0 ? \"#10b981\" : \"#f43f5e\"}\r\n                                strokeWidth={2}\r\n                                dot={false}\r\n                            />\r\n                        </LineChart>\r\n                    </ResponsiveContainer>\r\n                ) : (\r\n                    <div className=\"h-full flex items-center justify-center text-xs text-slate-500\">No chart data</div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Click hint */}\r\n            <div className=\"mt-2 text-[10px] text-slate-500 text-center opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                Click for details & forecast ΓåÆ\r\n            </div>\r\n        </div>\r\n    </div>\r\n);\r\n\r\ninterface Security {\r\n    ticker: string;\r\n    name: string;\r\n    sector: string;\r\n    price?: number;\r\n    change?: number;\r\n    history?: any[];\r\n}\r\n\r\nimport { StockDetailModal } from './StockDetailModal';\r\n\r\nexport const MarketPulse = () => {\r\n    const [securities, setSecurities] = useState<Security[]>([]);\r\n    const [selectedStock, setSelectedStock] = useState<Security | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState('');\r\n    const [downloading, setDownloading] = useState(false);\r\n    const [downloadingSpreadsheet, setDownloadingSpreadsheet] = useState(false);\r\n    const [exportMenuOpen, setExportMenuOpen] = useState(false);\r\n    const exportMenuRef = useRef<HTMLDivElement>(null);\r\n\r\n    // Close dropdown when clicking outside\r\n    useEffect(() => {\r\n        const handleClickOutside = (event: MouseEvent) => {\r\n            if (exportMenuRef.current && !exportMenuRef.current.contains(event.target as Node)) {\r\n                setExportMenuOpen(false);\r\n            }\r\n        };\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => document.removeEventListener('mousedown', handleClickOutside);\r\n    }, []);\r\n\r\n    const handleDownloadSpreadsheet = () => {\r\n        try {\r\n            setDownloadingSpreadsheet(true);\r\n\r\n            // Create CSV content from securities data\r\n            const headers = ['Ticker', 'Name', 'Sector', 'Price (ZMW)', 'Change', 'Change %'];\r\n            const rows = securities.map(s => [\r\n                s.ticker,\r\n                s.name,\r\n                s.sector,\r\n                s.price?.toFixed(2) ?? 'N/A',\r\n                (s.change ?? 0).toFixed(2),\r\n                `${((s as any).change_percent ?? 0).toFixed(2)}%`\r\n            ]);\r\n\r\n            const csvContent = [\r\n                headers.join(','),\r\n                ...rows.map(row => row.map(cell => `\"${cell}\"`).join(','))\r\n            ].join('\\n');\r\n\r\n            // Create and download the file\r\n            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n            const url = window.URL.createObjectURL(blob);\r\n            const a = document.createElement('a');\r\n            a.href = url;\r\n            a.download = `LuSE_Market_Data_${new Date().toISOString().split('T')[0]}.csv`;\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            document.body.removeChild(a);\r\n            window.URL.revokeObjectURL(url);\r\n        } catch (err) {\r\n            console.error('Spreadsheet export failed:', err);\r\n        } finally {\r\n            setDownloadingSpreadsheet(false);\r\n        }\r\n    };\r\n\r\n    const handleDownloadReport = async () => {\r\n        try {\r\n            setDownloading(true);\r\n            const token = localStorage.getItem('user') ? JSON.parse(localStorage.getItem('user')!).access_token : null;\r\n            const response = await fetch('http://localhost:8000/api/v1/reports/market-summary', {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`\r\n                }\r\n            });\r\n\r\n            if (!response.ok) throw new Error('Download failed');\r\n\r\n            const blob = await response.blob();\r\n            const url = window.URL.createObjectURL(blob);\r\n            const a = document.createElement('a');\r\n            a.href = url;\r\n            a.download = `LuSE_Market_Report_${new Date().toISOString().split('T')[0]}.pdf`;\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            window.URL.revokeObjectURL(url);\r\n        } catch (err) {\r\n            console.error(err);\r\n        } finally {\r\n            setDownloading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const loadMarketData = async () => {\r\n            try {\r\n                // Fetch market summary directly\r\n                const today = new Date().toISOString().split('T')[0];\r\n                const response = await fetch(`http://localhost:8000/api/v1/market-data/market-summary?date=${today}`);\r\n                if (!response.ok) {\r\n                    throw new Error(\"Failed to fetch market summary\");\r\n                }\r\n                const data = await response.json();\r\n\r\n                const mapped = data.map((item: any) => {\r\n                    // Get price from the latest history entry if price is null\r\n                    let displayPrice = item.price;\r\n                    if (displayPrice == null && item.history && item.history.length > 0) {\r\n                        // Sort by date descending and get latest\r\n                        const sortedHistory = [...item.history].sort((a: any, b: any) =>\r\n                            new Date(b.date).getTime() - new Date(a.date).getTime()\r\n                        );\r\n                        displayPrice = sortedHistory[0].value;\r\n                    }\r\n\r\n                    return {\r\n                        ...item,\r\n                        price: displayPrice,\r\n                        change: item.change_percent ?? item.change ?? 0\r\n                    };\r\n                });\r\n\r\n                setSecurities(mapped);\r\n            } catch (err) {\r\n                console.error(\"Failed to fetch securities\", err);\r\n                setError('Failed to fetch market data');\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        loadMarketData();\r\n    }, []);\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"min-h-screen bg-brand-dark flex items-center justify-center text-white\">\r\n                <Loader2 className=\"w-10 h-10 animate-spin text-brand-primary\" />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <div className=\"min-h-screen bg-brand-dark flex items-center justify-center text-white\">\r\n                <p className=\"text-red-400\">{error}</p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"p-6 space-y-8 animate-in fade-in duration-700 bg-brand-dark min-h-screen text-slate-100 font-sans\">\r\n            <header className=\"flex justify-between items-center mb-8\">\r\n                <div>\r\n                    <h1 className=\"text-4xl font-extrabold tracking-tight bg-gradient-to-r from-brand-primary to-emerald-400 bg-clip-text text-transparent\">LuSE Market Pulse</h1>\r\n                    <p className=\"text-brand-secondary mt-1\">Real-time Bitemporal Data Stream</p>\r\n                </div>\r\n                <div className=\"flex gap-4\">\r\n                    {/* Export Dropdown */}\r\n                    <div className=\"relative\" ref={exportMenuRef}>\r\n                        <button\r\n                            onClick={() => setExportMenuOpen(!exportMenuOpen)}\r\n                            className=\"flex items-center gap-2 px-3 py-2 bg-brand-primary/10 hover:bg-brand-primary/20 text-brand-primary rounded-lg text-sm transition-colors border border-brand-primary/20\"\r\n                        >\r\n                            <Download className=\"w-4 h-4\" />\r\n                            Export\r\n                            <ChevronDown className={cn(\"w-4 h-4 transition-transform\", exportMenuOpen && \"rotate-180\")} />\r\n                        </button>\r\n\r\n                        {exportMenuOpen && (\r\n                            <div className=\"absolute right-0 mt-2 w-48 bg-slate-800 border border-white/10 rounded-lg shadow-xl z-50 overflow-hidden\">\r\n                                <button\r\n                                    onClick={() => {\r\n                                        handleDownloadReport();\r\n                                        setExportMenuOpen(false);\r\n                                    }}\r\n                                    disabled={downloading}\r\n                                    className=\"w-full flex items-center gap-3 px-4 py-3 text-sm text-slate-200 hover:bg-white/10 transition-colors disabled:opacity-50\"\r\n                                >\r\n                                    {downloading ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Download className=\"w-4 h-4 text-brand-primary\" />}\r\n                                    <span>Export as PDF</span>\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => {\r\n                                        handleDownloadSpreadsheet();\r\n                                        setExportMenuOpen(false);\r\n                                    }}\r\n                                    disabled={downloadingSpreadsheet}\r\n                                    className=\"w-full flex items-center gap-3 px-4 py-3 text-sm text-slate-200 hover:bg-white/10 transition-colors disabled:opacity-50 border-t border-white/5\"\r\n                                >\r\n                                    {downloadingSpreadsheet ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <FileSpreadsheet className=\"w-4 h-4 text-emerald-400\" />}\r\n                                    <span>Export as CSV</span>\r\n                                </button>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2 bg-white/5 px-4 py-2 rounded-lg border border-white/10\">\r\n                        <Activity className=\"w-4 h-4 text-brand-primary\" />\r\n                        <span className=\"text-sm font-mono\">LASI: 25,919.83 (+0.86%)</span>\r\n                    </div>\r\n                </div>\r\n            </header>\r\n\r\n            <section>\r\n                <h2 className=\"text-xl font-semibold mb-4 flex items-center gap-2\">\r\n                    <DollarSign className=\"w-5 h-5 text-emerald-400\" /> Market Snapshot\r\n                </h2>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n                    {securities.length === 0 ? (\r\n                        <div className=\"col-span-4 text-center text-brand-secondary\">No market data available. Ensure backend is running and seeded.</div>\r\n                    ) : (\r\n                        securities.map(s => (\r\n                            <TickerCard\r\n                                key={s.ticker}\r\n                                {...s as any}\r\n                                onClick={() => setSelectedStock(s)}\r\n                            />\r\n                        ))\r\n                    )}\r\n                </div>\r\n            </section>\r\n\r\n            <section className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                <div className=\"lg:col-span-2 bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-sm\">\r\n                    <h3 className=\"text-lg font-semibold mb-6\">LuSE All Share Index (LASI) Performance</h3>\r\n                    <div className=\"h-64 flex items-center justify-center text-brand-secondary\">\r\n                        {/* Placeholder for Main Index Chart */}\r\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                            <LineChart data={mockData.map(d => ({ ...d, value: d.value * 1500 }))}>\r\n                                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#334155\" vertical={false} />\r\n                                <XAxis dataKey=\"name\" stroke=\"#94a3b8\" />\r\n                                <YAxis stroke=\"#94a3b8\" />\r\n                                <Tooltip contentStyle={{ backgroundColor: '#0f172a', borderColor: '#334155' }} />\r\n                                <Line type=\"monotone\" dataKey=\"value\" stroke=\"#0ea5e9\" strokeWidth={3} activeDot={{ r: 8 }} />\r\n                            </LineChart>\r\n                        </ResponsiveContainer>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-sm\">\r\n                    <h3 className=\"text-lg font-semibold mb-4\">Market Depth</h3>\r\n                    <div className=\"space-y-4\">\r\n                        {[1, 2, 3, 4, 5].map(i => (\r\n                            <div key={i} className=\"flex justify-between text-sm py-2 border-b border-white/5 last:border-0 hover:bg-white/5 px-2 rounded cursor-pointer\">\r\n                                <span className=\"text-brand-secondary\">10:4{i} AM</span>\r\n                                <span className=\"font-mono text-emerald-400\">BUY 500 ZANACO @ K4.35</span>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </section>\r\n\r\n            <StockDetailModal\r\n                isOpen={!!selectedStock}\r\n                onClose={() => setSelectedStock(null)}\r\n                stock={selectedStock as any}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Mwitw\\OneDrive\\Documents\\GitHub\\Projects\\frontend\\src\\components\\PortfolioOptimizer.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":58,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":58,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2624,2627],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2624,2627],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":124,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":124,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4838,4841],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4838,4841],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_' is defined but never used.","line":134,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":134,"endColumn":24},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":169,"column":89,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":169,"endColumn":92,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6824,6827],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6824,6827],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":351,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":351,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17526,17529],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17526,17529],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_' is defined but never used.","line":358,"column":51,"nodeType":null,"messageId":"unusedVar","endLine":358,"endColumn":52},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":392,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":392,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20532,20535],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20532,20535],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport type { FormEvent } from 'react';\r\nimport { Loader2, AlertCircle, PieChart as PieChartIcon, Trash2 } from 'lucide-react';\r\nimport { PieChart, Pie, Cell, Tooltip, ResponsiveContainer, ScatterChart, Scatter, CartesianGrid, XAxis, YAxis } from 'recharts';\r\nimport api, { optimizationAPI } from '../services/api';\r\n\r\n// Asset type definition\r\ninterface Asset {\r\n    ticker: string;\r\n    returns: number[];\r\n}\r\n\r\n// Optimization API result type\r\ninterface OptimizationResult {\r\n    weights: Record<string, number>;\r\n    expected_return: number;\r\n    volatility: number;\r\n    sharpe_ratio: number;\r\n    objective: string;\r\n}\r\n\r\n// Efficient frontier API result type\r\ninterface FrontierResult {\r\n    frontier: Array<{ volatility: number; return: number }>;\r\n    n_points: number;\r\n    assets: string[];\r\n    optimalPoint?: { volatility: number; return: number };\r\n}\r\n\r\nconst COLORS = ['#0ea5e9', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6', '#ec4899', '#14b8a6', '#f97316'];\r\n\r\n/**\r\n * PortfolioOptimizer component: UI for multi-asset portfolio optimization and visualization.\r\n */\r\nexport const PortfolioOptimizer = () => {\r\n    // Default sample data with realistic LuSE stock returns (monthly returns)\r\n    const [assets, setAssets] = useState<Asset[]>([\r\n        { ticker: 'ZCCM', returns: [0.025, 0.015, -0.02, 0.035, 0.01, 0.028, -0.015, 0.022] },\r\n        { ticker: 'CECZ', returns: [0.018, 0.022, -0.008, 0.03, 0.012, 0.015, -0.01, 0.025] },\r\n        { ticker: 'ZNCO', returns: [0.012, 0.018, 0.005, 0.015, 0.02, 0.008, 0.015, 0.012] },\r\n        { ticker: 'ATEL', returns: [0.02, 0.025, 0.01, 0.022, 0.018, 0.015, 0.012, 0.02] },\r\n    ]);\r\n    // Zambian T-bill rate approximately 12-14% for short-term, using 13% annualized\r\n    const [riskFreeRate, setRiskFreeRate] = useState<number>(0.13);\r\n    const [objective, setObjective] = useState<'max_sharpe' | 'min_vol' | 'equal_weight'>('max_sharpe');\r\n    const [result, setResult] = useState<OptimizationResult | null>(null);\r\n    const [frontierData, setFrontierData] = useState<FrontierResult | null>(null);\r\n    const [loading, setLoading] = useState<boolean>(false);\r\n    const [error, setError] = useState<string>('');\r\n    const [activeTab, setActiveTab] = useState<'weights' | 'frontier'>('weights');\r\n\r\n    const [availableSecurities, setAvailableSecurities] = useState<string[]>([]);\r\n\r\n    useEffect(() => {\r\n        const fetchSecurities = async () => {\r\n            try {\r\n                const response = await api.get('/market-data/securities');\r\n                setAvailableSecurities(response.data.map((s: any) => s.ticker));\r\n            } catch (err) {\r\n                console.error(\"Failed to fetch securities\", err);\r\n            }\r\n        };\r\n        fetchSecurities();\r\n    }, []);\r\n\r\n    // Add a new asset row\r\n    const addAsset = () => {\r\n        setAssets([...assets, { ticker: availableSecurities[0] || '', returns: [] }]);\r\n    };\r\n\r\n    // Remove an asset row by index\r\n    const removeAsset = (index: number) => {\r\n        setAssets(assets.filter((_, i) => i !== index));\r\n    };\r\n\r\n    // Update asset ticker or returns\r\n    const updateAsset = (index: number, field: 'ticker' | 'returns', value: string) => {\r\n        const newAssets = [...assets];\r\n        if (field === 'returns') {\r\n            newAssets[index].returns = value.split(',').map((v: string) => parseFloat(v.trim())).filter((v) => !isNaN(v));\r\n        } else {\r\n            newAssets[index].ticker = value.toUpperCase();\r\n        }\r\n        setAssets(newAssets);\r\n    };\r\n\r\n    // Handle optimization form submit\r\n    const handleOptimize = async (e: FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        setError('');\r\n        setResult(null);\r\n\r\n        try {\r\n            const returnsData: Record<string, number[]> = {};\r\n            assets.forEach(asset => {\r\n                if (asset.ticker && asset.returns.length > 0) {\r\n                    returnsData[asset.ticker] = asset.returns;\r\n                }\r\n            });\r\n\r\n            if (Object.keys(returnsData).length === 0) {\r\n                setError('Please add at least one asset with returns data');\r\n                setLoading(false);\r\n                return;\r\n            }\r\n\r\n            const data = await optimizationAPI.optimize({\r\n                returns_data: returnsData,\r\n                objective,\r\n                risk_free_rate: riskFreeRate,\r\n            });\r\n\r\n            setResult(data);\r\n\r\n            // Also fetch efficient frontier\r\n            const frontierResult = await optimizationAPI.efficientFrontier({\r\n                returns_data: returnsData,\r\n                n_points: 50,\r\n                risk_free_rate: riskFreeRate,\r\n            });\r\n\r\n            setFrontierData(frontierResult);\r\n        } catch (err: any) {\r\n            setError(err.response?.data?.detail || 'Optimization failed');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const getWeightPieData = () => {\r\n        if (!result) return [];\r\n        return Object.entries(result.weights)\r\n            .filter(([_, weight]) => weight > 0.001)\r\n            .map(([ticker, weight]) => ({\r\n                name: ticker,\r\n                value: Math.round(weight * 100),\r\n            }));\r\n    };\r\n\r\n    const getFrontierChartData = () => {\r\n        if (!frontierData) return [];\r\n        return frontierData.frontier.map(point => ({\r\n            volatility: Number((point.volatility * 100).toFixed(2)),\r\n            return: Number((point.return * 100).toFixed(2)),\r\n        }));\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Input Section */}\r\n            <div className=\"bg-white/5 border border-white/10 rounded-2xl p-8 backdrop-blur-sm\">\r\n                <h2 className=\"text-2xl font-bold text-white mb-6\">Portfolio Optimizer</h2>\r\n\r\n                <form onSubmit={handleOptimize} className=\"space-y-6\">\r\n                    {/* Objectives */}\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-slate-300 mb-3\">\r\n                            Optimization Objective\r\n                        </label>\r\n                        <div className=\"flex gap-4\">\r\n                            {(['max_sharpe', 'min_vol', 'equal_weight'] as const).map(opt => (\r\n                                <label key={opt} className=\"flex items-center gap-2 cursor-pointer\">\r\n                                    <input\r\n                                        type=\"radio\"\r\n                                        name=\"objective\"\r\n                                        value={opt}\r\n                                        checked={objective === opt}\r\n                                        onChange={(e) => setObjective(e.target.value as any)}\r\n                                        className=\"w-4 h-4\"\r\n                                    />\r\n                                    <span className=\"text-sm text-slate-300\">\r\n                                        {opt === 'max_sharpe' && 'Maximize Sharpe Ratio'}\r\n                                        {opt === 'min_vol' && 'Minimize Volatility'}\r\n                                        {opt === 'equal_weight' && 'Equal Weight'}\r\n                                    </span>\r\n                                </label>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Risk-Free Rate */}\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-slate-300 mb-2\">\r\n                            Risk-Free Rate (% p.a.)\r\n                        </label>\r\n                        <input\r\n                            type=\"number\"\r\n                            value={riskFreeRate * 100}\r\n                            onChange={(e) => setRiskFreeRate(parseFloat(e.target.value) / 100)}\r\n                            step=\"0.1\"\r\n                            className=\"w-full bg-white/10 border border-white/20 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-400\"\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Assets */}\r\n                    <div>\r\n                        <div className=\"flex justify-between items-center mb-3\">\r\n                            <label className=\"block text-sm font-medium text-slate-300\">\r\n                                Assets (Enter returns as comma-separated values)\r\n                            </label>\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={addAsset}\r\n                                className=\"text-blue-400 hover:text-blue-300 text-sm font-medium\"\r\n                            >\r\n                                + Add Asset\r\n                            </button>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-3 max-h-48 overflow-y-auto\">\r\n                            {assets.map((asset, idx) => (\r\n                                <div key={idx} className=\"flex gap-3\">\r\n                                    <select\r\n                                        value={asset.ticker}\r\n                                        onChange={(e) => updateAsset(idx, 'ticker', e.target.value)}\r\n                                        className=\"w-32 bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:border-blue-400 [&>option]:bg-slate-800 [&>option]:text-white\"\r\n                                    >\r\n                                        <option value=\"\" disabled>Select Asset</option>\r\n                                        {availableSecurities.length > 0 ? (\r\n                                            availableSecurities.map(t => (\r\n                                                <option key={t} value={t}>{t}</option>\r\n                                            ))\r\n                                        ) : (\r\n                                            // Fallback if fetch fails or loading\r\n                                            <option value={asset.ticker}>{asset.ticker || 'Loading...'}</option>\r\n                                        )}\r\n                                    </select>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={asset.returns.join(', ')}\r\n                                        onChange={(e) => updateAsset(idx, 'returns', e.target.value)}\r\n                                        placeholder=\"0.02, 0.03, -0.01, 0.04\"\r\n                                        className=\"flex-1 bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white placeholder-slate-400 text-sm focus:outline-none focus:border-blue-400\"\r\n                                    />\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => removeAsset(idx)}\r\n                                        className=\"text-red-400 hover:text-red-300 p-2\"\r\n                                    >\r\n                                        <Trash2 className=\"w-5 h-5\" />\r\n                                    </button>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={loading}\r\n                        className=\"w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white font-semibold py-3 rounded-lg hover:from-green-600 hover:to-emerald-700 disabled:opacity-50 transition flex items-center justify-center gap-2\"\r\n                    >\r\n                        {loading ? (\r\n                            <>\r\n                                <Loader2 className=\"w-5 h-5 animate-spin\" />\r\n                                Optimizing...\r\n                            </>\r\n                        ) : (\r\n                            'Optimize Portfolio'\r\n                        )}\r\n                    </button>\r\n                </form>\r\n\r\n                {error && (\r\n                    <div className=\"mt-6 bg-red-500/10 border border-red-500/30 rounded-lg p-4 flex items-gap-3\">\r\n                        <AlertCircle className=\"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5\" />\r\n                        <div className=\"text-red-200 text-sm\">{error}</div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Results Section */}\r\n            {result && (\r\n                <div className=\"space-y-6\">\r\n                    {/* Performance Metrics */}\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n                        <div className=\"bg-white/5 border border-white/10 rounded-xl p-4\">\r\n                            <div className=\"text-sm text-slate-400 mb-1\">Expected Return</div>\r\n                            <div className=\"text-2xl font-bold text-green-400\">\r\n                                {(result.expected_return * 100).toFixed(2)}%\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"bg-white/5 border border-white/10 rounded-xl p-4\">\r\n                            <div className=\"text-sm text-slate-400 mb-1\">Portfolio Volatility</div>\r\n                            <div className=\"text-2xl font-bold text-orange-400\">\r\n                                {(result.volatility * 100).toFixed(2)}%\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"bg-white/5 border border-white/10 rounded-xl p-4\">\r\n                            <div className=\"text-sm text-slate-400 mb-1\">Sharpe Ratio</div>\r\n                            <div className=\"text-2xl font-bold text-blue-400\">\r\n                                {result.sharpe_ratio.toFixed(3)}\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"bg-white/5 border border-white/10 rounded-xl p-4\">\r\n                            <div className=\"text-sm text-slate-400 mb-1\">Risk-Free Rate</div>\r\n                            <div className=\"text-2xl font-bold text-purple-400\">\r\n                                {(riskFreeRate * 100).toFixed(1)}%\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Tabs */}\r\n                    <div className=\"flex gap-4 border-b border-white/10\">\r\n                        <button\r\n                            onClick={() => setActiveTab('weights')}\r\n                            className={`px-4 py-2 font-medium border-b-2 transition ${activeTab === 'weights'\r\n                                ? 'border-blue-500 text-blue-400'\r\n                                : 'border-transparent text-slate-400 hover:text-slate-300'\r\n                                }`}\r\n                        >\r\n                            Asset Allocation\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setActiveTab('frontier')}\r\n                            className={`px-4 py-2 font-medium border-b-2 transition ${activeTab === 'frontier'\r\n                                ? 'border-blue-500 text-blue-400'\r\n                                : 'border-transparent text-slate-400 hover:text-slate-300'\r\n                                }`}\r\n                        >\r\n                            Efficient Frontier\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* Weights Chart */}\r\n                    {activeTab === 'weights' && (\r\n                        <div className=\"bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-sm\">\r\n                            <div className=\"flex items-center gap-2 mb-6\">\r\n                                <PieChartIcon className=\"w-5 h-5 text-blue-400\" />\r\n                                <h3 className=\"text-lg font-semibold text-white\">Optimal Asset Allocation</h3>\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n                                <div className=\"h-64\">\r\n                                    <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                                        <PieChart>\r\n                                            <Pie\r\n                                                data={getWeightPieData()}\r\n                                                cx=\"50%\"\r\n                                                cy=\"50%\"\r\n                                                labelLine={false}\r\n                                                label={({ name, value }) => `${name}: ${value}%`}\r\n                                                outerRadius={80}\r\n                                                fill=\"#8884d8\"\r\n                                                dataKey=\"value\"\r\n                                            >\r\n                                                {getWeightPieData().map((_, index) => (\r\n                                                    <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n                                                ))}\r\n                                            </Pie>\r\n                                            <Tooltip formatter={(value: any) => `${value}%`} />\r\n                                        </PieChart>\r\n                                    </ResponsiveContainer>\r\n                                </div>\r\n\r\n                                <div className=\"space-y-3\">\r\n                                    {Object.entries(result.weights)\r\n                                        .filter(([_, weight]) => (weight as number) > 0.001)\r\n                                        .map(([ticker, weight]) => (\r\n                                            <div key={ticker} className=\"bg-white/5 rounded-lg p-3 flex justify-between items-center\">\r\n                                                <span className=\"font-semibold text-white\">{ticker}</span>\r\n                                                <div className=\"text-right\">\r\n                                                    <div className=\"text-lg font-bold text-emerald-400\">\r\n                                                        {((weight as number) * 100).toFixed(1)}%\r\n                                                    </div>\r\n                                                    <div className=\"w-32 bg-white/10 rounded-full h-2 mt-1 overflow-hidden\">\r\n                                                        <div\r\n                                                            className=\"bg-gradient-to-r from-emerald-500 to-green-400 h-full\"\r\n                                                            style={{ width: `${(weight as number) * 100}%` }}\r\n                                                        />\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        ))}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Efficient Frontier */}\r\n                    {activeTab === 'frontier' && frontierData && (\r\n                        <div className=\"bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-sm\">\r\n                            <h3 className=\"text-lg font-semibold text-white mb-6\">Efficient Frontier</h3>\r\n                            <div className=\"h-80\">\r\n                                <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                                    <ScatterChart margin={{ top: 20, right: 20, bottom: 20, left: 20 }}>\r\n                                        <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#334155\" />\r\n                                        <XAxis dataKey=\"volatility\" name=\"Volatility (%)\" stroke=\"#94a3b8\" />\r\n                                        <YAxis dataKey=\"return\" name=\"Return (%)\" stroke=\"#94a3b8\" />\r\n                                        <Tooltip\r\n                                            contentStyle={{ backgroundColor: '#0f172a', borderColor: '#334155' }}\r\n                                            formatter={(value: any) => value.toFixed(2)}\r\n                                        />\r\n                                        <Scatter\r\n                                            name=\"Frontier\"\r\n                                            data={getFrontierChartData()}\r\n                                            fill=\"#10b981\"\r\n                                            line\r\n                                        />\r\n                                        {frontierData.optimalPoint && (\r\n                                            <Scatter\r\n                                                name=\"Optimal Portfolio\"\r\n                                                data={[{\r\n                                                    volatility: Number((frontierData.optimalPoint.volatility * 100).toFixed(2)),\r\n                                                    return: Number((frontierData.optimalPoint.return * 100).toFixed(2)),\r\n                                                }]}\r\n                                                fill=\"#fbbf24\"\r\n                                                shape=\"star\"\r\n                                            />\r\n                                        )}\r\n                                    </ScatterChart>\r\n                                </ResponsiveContainer>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Mwitw\\OneDrive\\Documents\\GitHub\\Projects\\frontend\\src\\components\\RiskAnalyzer.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":81,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":81,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3089,3092],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3089,3092],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":124,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":124,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4487,4490],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4487,4490],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":245,"column":89,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":245,"endColumn":92,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10264,10267],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10264,10267],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState } from 'react';\r\nimport { Loader2, AlertCircle, TrendingDown } from 'lucide-react';\r\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, LineChart, Line } from 'recharts';\r\n\r\n\r\n// Type definitions\r\ninterface RiskResult {\r\n    var_value: number;\r\n    confidence_level: number;\r\n    method: string;\r\n}\r\ninterface CVaRResult {\r\n    cvar_value: number;\r\n    confidence_level: number;\r\n}\r\ninterface BetaResult {\r\n    beta: number;\r\n    alpha?: number;\r\n    r_squared?: number;\r\n}\r\n\r\nimport { riskAPI, optimizationAPI } from '../services/api';\r\n\r\n\r\nexport const RiskAnalyzer = () => {\r\n    // State hooks\r\n    const [activeTab, setActiveTab] = useState<'var' | 'beta'>('var');\r\n    const [varReturns, setVarReturns] = useState<string>('0.02, -0.03, 0.04, -0.01, 0.05, 0.03, -0.02, 0.01, 0.06, -0.04');\r\n    const [varConfidence, setVarConfidence] = useState<number>(0.95);\r\n    const [varMethod, setVarMethod] = useState<'historical' | 'parametric' | 'monte_carlo'>('historical');\r\n    const [varResult, setVarResult] = useState<RiskResult | null>(null);\r\n    const [cvarResult, setCvarResult] = useState<CVaRResult | null>(null);\r\n    const [varLoading, setVarLoading] = useState<boolean>(false);\r\n    const [varError, setVarError] = useState<string>('');\r\n    const [assetReturns, setAssetReturns] = useState<string>('0.02, 0.03, -0.01, 0.04, 0.01, 0.02, -0.02, 0.03');\r\n    const [marketReturns, setMarketReturns] = useState<string>('0.01, 0.02, -0.005, 0.03, 0.015, 0.01, -0.01, 0.025');\r\n    const [betaResult, setBetaResult] = useState<BetaResult | null>(null);\r\n    const [betaLoading, setBetaLoading] = useState<boolean>(false);\r\n    const [betaError, setBetaError] = useState<string>('');\r\n\r\n    // Handler for VaR calculation\r\n    const handleCalculateVaR = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setVarLoading(true);\r\n        setVarError('');\r\n        setVarResult(null);\r\n        setCvarResult(null);\r\n\r\n        try {\r\n            const returns = varReturns\r\n                .split(',')\r\n                .map((v: string) => parseFloat(v.trim()))\r\n                .filter((v: number) => !isNaN(v));\r\n\r\n            if (returns.length === 0) {\r\n                setVarError('Please enter valid return values');\r\n                setVarLoading(false);\r\n                return;\r\n            }\r\n\r\n            // Calculate VaR\r\n            const varData = await riskAPI.valueAtRisk({\r\n                returns,\r\n                confidence_level: varConfidence,\r\n                method: varMethod,\r\n            });\r\n\r\n            setVarResult(varData);\r\n\r\n            // Calculate CVaR if confidence level is suitable\r\n            if (varConfidence >= 0.90) {\r\n                const cvarData = await riskAPI.conditionalVaR({\r\n                    returns,\r\n                    confidence_level: varConfidence,\r\n                    method: varMethod === 'monte_carlo' ? 'historical' : varMethod,\r\n                });\r\n\r\n                setCvarResult(cvarData);\r\n            }\r\n        } catch (err: any) {\r\n            setVarError(err.response?.data?.detail || 'VaR calculation failed');\r\n        } finally {\r\n            setVarLoading(false);\r\n        }\r\n    };\r\n\r\n    // Beta Handler\r\n    const handleCalculateBeta = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setBetaLoading(true);\r\n        setBetaError('');\r\n        setBetaResult(null);\r\n\r\n        try {\r\n            const asset = assetReturns\r\n                .split(',')\r\n                .map(v => parseFloat(v.trim()))\r\n                .filter(v => !isNaN(v));\r\n\r\n            const market = marketReturns\r\n                .split(',')\r\n                .map(v => parseFloat(v.trim()))\r\n                .filter(v => !isNaN(v));\r\n\r\n            if (asset.length === 0 || market.length === 0) {\r\n                setBetaError('Please enter valid return values for both asset and market');\r\n                setBetaLoading(false);\r\n                return;\r\n            }\r\n\r\n            if (asset.length !== market.length) {\r\n                setBetaError('Asset and market returns must have the same number of periods');\r\n                setBetaLoading(false);\r\n                return;\r\n            }\r\n\r\n            const data = await optimizationAPI.calculateBeta({\r\n                asset_returns: asset,\r\n                market_returns: market,\r\n            });\r\n\r\n            setBetaResult(data);\r\n        } catch (err: any) {\r\n            setBetaError(err.response?.data?.detail || 'Beta calculation failed');\r\n        } finally {\r\n            setBetaLoading(false);\r\n        }\r\n    };\r\n\r\n    const getChartData = () => {\r\n        try {\r\n            const returns = varReturns\r\n                .split(',')\r\n                .map(v => parseFloat(v.trim()))\r\n                .filter(v => !isNaN(v));\r\n\r\n            return returns.map((value, index) => ({\r\n                period: index + 1,\r\n                return: Number((value * 100).toFixed(2)),\r\n            }));\r\n        } catch {\r\n            return [];\r\n        }\r\n    };\r\n\r\n    const getBetaChartData = () => {\r\n        try {\r\n            const asset = assetReturns\r\n                .split(',')\r\n                .map(v => parseFloat(v.trim()))\r\n                .filter(v => !isNaN(v));\r\n\r\n            const market = marketReturns\r\n                .split(',')\r\n                .map(v => parseFloat(v.trim()))\r\n                .filter(v => !isNaN(v));\r\n\r\n            return asset.map((value, index) => ({\r\n                period: index + 1,\r\n                asset: Number((value * 100).toFixed(2)),\r\n                market: Number((market[index] * 100).toFixed(2)),\r\n            }));\r\n        } catch {\r\n            return [];\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Tabs */}\r\n            <div className=\"flex gap-4 border-b border-white/10\">\r\n                <button\r\n                    onClick={() => setActiveTab('var')}\r\n                    className={`px-4 py-2 font-medium border-b-2 transition ${activeTab === 'var'\r\n                        ? 'border-red-500 text-red-400'\r\n                        : 'border-transparent text-slate-400 hover:text-slate-300'\r\n                        }`}\r\n                >\r\n                    Value at Risk\r\n                </button>\r\n                <button\r\n                    onClick={() => setActiveTab('beta')}\r\n                    className={`px-4 py-2 font-medium border-b-2 transition ${activeTab === 'beta'\r\n                        ? 'border-blue-500 text-blue-400'\r\n                        : 'border-transparent text-slate-400 hover:text-slate-300'\r\n                        }`}\r\n                >\r\n                    Beta Calculation\r\n                </button>\r\n            </div>\r\n\r\n            {/* VaR Tab */}\r\n            {activeTab === 'var' && (\r\n                <div className=\"space-y-6\">\r\n                    <div className=\"bg-white/5 border border-white/10 rounded-2xl p-8 backdrop-blur-sm\">\r\n                        <div className=\"flex items-center gap-3 mb-6\">\r\n                            <TrendingDown className=\"w-6 h-6 text-red-400\" />\r\n                            <h2 className=\"text-2xl font-bold text-white\">Value at Risk (VaR) Analysis</h2>\r\n                        </div>\r\n\r\n                        <form onSubmit={handleCalculateVaR} className=\"space-y-6\">\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-slate-300 mb-2\">\r\n                                    Return Series (comma-separated)\r\n                                </label>\r\n                                <textarea\r\n                                    value={varReturns}\r\n                                    onChange={(e) => setVarReturns(e.target.value)}\r\n                                    placeholder=\"0.02, -0.03, 0.04, -0.01, 0.05\"\r\n                                    className=\"w-full bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white placeholder-slate-400 focus:outline-none focus:border-blue-400\"\r\n                                    rows={3}\r\n                                />\r\n                                <p className=\"text-xs text-slate-400 mt-1\">Enter daily/weekly/monthly returns as decimals</p>\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-slate-300 mb-2\">\r\n                                        Confidence Level\r\n                                    </label>\r\n                                    <div className=\"flex gap-2\">\r\n                                        {[0.90, 0.95, 0.99].map(level => (\r\n                                            <button\r\n                                                key={level}\r\n                                                type=\"button\"\r\n                                                onClick={() => setVarConfidence(level)}\r\n                                                className={`flex-1 py-2 px-3 rounded-lg font-medium transition ${varConfidence === level\r\n                                                    ? 'bg-red-500/30 border border-red-500 text-red-300'\r\n                                                    : 'bg-white/10 border border-white/20 text-slate-300 hover:bg-white/15'\r\n                                                    }`}\r\n                                            >\r\n                                                {(level * 100).toFixed(0)}%\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-slate-300 mb-2\">\r\n                                        Calculation Method\r\n                                    </label>\r\n                                    <select\r\n                                        value={varMethod}\r\n                                        onChange={(e) => setVarMethod(e.target.value as any)}\r\n                                        className=\"w-full bg-white/10 border border-white/20 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-400\"\r\n                                    >\r\n                                        <option value=\"historical\">Historical Simulation</option>\r\n                                        <option value=\"parametric\">Parametric (Normal)</option>\r\n                                        <option value=\"monte_carlo\">Monte Carlo</option>\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={varLoading}\r\n                                className=\"w-full bg-gradient-to-r from-red-500 to-red-600 text-white font-semibold py-3 rounded-lg hover:from-red-600 hover:to-red-700 disabled:opacity-50 transition flex items-center justify-center gap-2\"\r\n                            >\r\n                                {varLoading ? (\r\n                                    <>\r\n                                        <Loader2 className=\"w-5 h-5 animate-spin\" />\r\n                                        Calculating...\r\n                                    </>\r\n                                ) : (\r\n                                    'Calculate VaR'\r\n                                )}\r\n                            </button>\r\n                        </form>\r\n\r\n                        {varError && (\r\n                            <div className=\"mt-6 bg-red-500/10 border border-red-500/30 rounded-lg p-4 flex gap-3\">\r\n                                <AlertCircle className=\"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5\" />\r\n                                <div className=\"text-red-200 text-sm\">{varError}</div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Chart */}\r\n                        {getChartData().length > 0 && (\r\n                            <div className=\"mt-8 bg-white/5 rounded-xl p-6 border border-white/10\">\r\n                                <h3 className=\"text-lg font-semibold text-white mb-4\">Return Distribution</h3>\r\n                                <div className=\"h-64\">\r\n                                    <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                                        <BarChart data={getChartData()}>\r\n                                            <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#334155\" />\r\n                                            <XAxis dataKey=\"period\" stroke=\"#94a3b8\" />\r\n                                            <YAxis stroke=\"#94a3b8\" />\r\n                                            <Tooltip contentStyle={{ backgroundColor: '#0f172a', borderColor: '#334155' }} />\r\n                                            <Bar\r\n                                                dataKey=\"return\"\r\n                                                fill=\"#3b82f6\"\r\n                                                radius={[4, 4, 0, 0]}\r\n                                            />\r\n                                        </BarChart>\r\n                                    </ResponsiveContainer>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Results */}\r\n                    {(varResult || cvarResult) && (\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                            {varResult && (\r\n                                <div className=\"bg-gradient-to-br from-red-500/10 to-orange-500/10 border border-red-500/30 rounded-xl p-6\">\r\n                                    <div className=\"text-sm text-slate-400 mb-2\">Value at Risk ({(varResult.confidence_level * 100).toFixed(0)}%)</div>\r\n                                    <div className=\"text-3xl font-bold text-red-400\">\r\n                                        {(varResult.var_value * 100).toFixed(2)}%\r\n                                    </div>\r\n                                    <div className=\"text-xs text-slate-500 mt-2\">Max expected loss ({varResult.method})</div>\r\n                                </div>\r\n                            )}\r\n\r\n                            {cvarResult && (\r\n                                <div className=\"bg-gradient-to-br from-orange-500/10 to-red-500/10 border border-orange-500/30 rounded-xl p-6\">\r\n                                    <div className=\"text-sm text-slate-400 mb-2\">Conditional VaR (Expected Shortfall)</div>\r\n                                    <div className=\"text-3xl font-bold text-orange-400\">\r\n                                        {(cvarResult.cvar_value * 100).toFixed(2)}%\r\n                                    </div>\r\n                                    <div className=\"text-xs text-slate-500 mt-2\">Average loss beyond VaR</div>\r\n                                </div>\r\n                            )}\r\n\r\n                            {varResult && cvarResult && (\r\n                                <div className=\"bg-gradient-to-br from-blue-500/10 to-cyan-500/10 border border-blue-500/30 rounded-xl p-6\">\r\n                                    <div className=\"text-sm text-slate-400 mb-2\">Risk Interpretation</div>\r\n                                    <div className=\"text-sm text-blue-300 space-y-2\">\r\n                                        <p>There's a {(varResult.confidence_level * 100).toFixed(0)}% chance returns will not fall below {(varResult.var_value * 100).toFixed(2)}%</p>\r\n                                        <p>If losses exceed VaR, average loss is {(cvarResult.cvar_value * 100).toFixed(2)}%</p>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n\r\n            {/* Beta Tab */}\r\n            {activeTab === 'beta' && (\r\n                <div className=\"space-y-6\">\r\n                    <div className=\"bg-white/5 border border-white/10 rounded-2xl p-8 backdrop-blur-sm\">\r\n                        <h2 className=\"text-2xl font-bold text-white mb-6\">Systematic Risk (Beta) Calculation</h2>\r\n\r\n                        <form onSubmit={handleCalculateBeta} className=\"space-y-6\">\r\n                            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-slate-300 mb-2\">\r\n                                        Asset Returns (comma-separated)\r\n                                    </label>\r\n                                    <textarea\r\n                                        value={assetReturns}\r\n                                        onChange={(e) => setAssetReturns(e.target.value)}\r\n                                        placeholder=\"0.02, 0.03, -0.01, 0.04\"\r\n                                        className=\"w-full bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white placeholder-slate-400 focus:outline-none focus:border-blue-400\"\r\n                                        rows={4}\r\n                                    />\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-slate-300 mb-2\">\r\n                                        Market Returns (comma-separated)\r\n                                    </label>\r\n                                    <textarea\r\n                                        value={marketReturns}\r\n                                        onChange={(e) => setMarketReturns(e.target.value)}\r\n                                        placeholder=\"0.01, 0.02, -0.005, 0.03\"\r\n                                        className=\"w-full bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white placeholder-slate-400 focus:outline-none focus:border-blue-400\"\r\n                                        rows={4}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={betaLoading}\r\n                                className=\"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white font-semibold py-3 rounded-lg hover:from-blue-600 hover:to-blue-700 disabled:opacity-50 transition flex items-center justify-center gap-2\"\r\n                            >\r\n                                {betaLoading ? (\r\n                                    <>\r\n                                        <Loader2 className=\"w-5 h-5 animate-spin\" />\r\n                                        Calculating...\r\n                                    </>\r\n                                ) : (\r\n                                    'Calculate Beta'\r\n                                )}\r\n                            </button>\r\n                        </form>\r\n\r\n                        {betaError && (\r\n                            <div className=\"mt-6 bg-red-500/10 border border-red-500/30 rounded-lg p-4 flex gap-3\">\r\n                                <AlertCircle className=\"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5\" />\r\n                                <div className=\"text-red-200 text-sm\">{betaError}</div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Chart */}\r\n                        {getBetaChartData().length > 0 && (\r\n                            <div className=\"mt-8 bg-white/5 rounded-xl p-6 border border-white/10\">\r\n                                <h3 className=\"text-lg font-semibold text-white mb-4\">Returns Comparison</h3>\r\n                                <div className=\"h-64\">\r\n                                    <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                                        <LineChart data={getBetaChartData()}>\r\n                                            <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#334155\" />\r\n                                            <XAxis dataKey=\"period\" stroke=\"#94a3b8\" />\r\n                                            <YAxis stroke=\"#94a3b8\" />\r\n                                            <Tooltip contentStyle={{ backgroundColor: '#0f172a', borderColor: '#334155' }} />\r\n                                            <Legend />\r\n                                            <Line type=\"monotone\" dataKey=\"asset\" stroke=\"#3b82f6\" strokeWidth={2} name=\"Asset\" />\r\n                                            <Line type=\"monotone\" dataKey=\"market\" stroke=\"#10b981\" strokeWidth={2} name=\"Market\" />\r\n                                        </LineChart>\r\n                                    </ResponsiveContainer>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Results */}\r\n                    {betaResult && (\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                            <div className=\"bg-gradient-to-br from-blue-500/10 to-cyan-500/10 border border-blue-500/30 rounded-xl p-6\">\r\n                                <div className=\"text-sm text-slate-400 mb-2\">Beta (╬▓)</div>\r\n                                <div className=\"text-3xl font-bold text-blue-400\">{betaResult.beta.toFixed(3)}</div>\r\n                                <div className=\"text-xs text-slate-500 mt-2\">\r\n                                    {betaResult.beta > 1 ? 'More volatile than market' : betaResult.beta < 1 ? 'Less volatile than market' : 'Moves with market'}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {betaResult.alpha !== undefined && (\r\n                                <div className=\"bg-gradient-to-br from-green-500/10 to-emerald-500/10 border border-green-500/30 rounded-xl p-6\">\r\n                                    <div className=\"text-sm text-slate-400 mb-2\">Alpha (╬▒)</div>\r\n                                    <div className=\"text-3xl font-bold text-green-400\">\r\n                                        {(betaResult.alpha * 100).toFixed(2)}%\r\n                                    </div>\r\n                                    <div className=\"text-xs text-slate-500 mt-2\">Excess return (risk-adjusted)</div>\r\n                                </div>\r\n                            )}\r\n\r\n                            {betaResult.r_squared !== undefined && (\r\n                                <div className=\"bg-gradient-to-br from-purple-500/10 to-pink-500/10 border border-purple-500/30 rounded-xl p-6\">\r\n                                    <div className=\"text-sm text-slate-400 mb-2\">R┬▓ (Model Fit)</div>\r\n                                    <div className=\"text-3xl font-bold text-purple-400\">{(betaResult.r_squared * 100).toFixed(1)}%</div>\r\n                                    <div className=\"text-xs text-slate-500 mt-2\">% variation explained by market</div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Mwitw\\OneDrive\\Documents\\GitHub\\Projects\\frontend\\src\\components\\StockDetailModal.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchHistoricalData'. Either include it or remove the dependency array.","line":40,"column":8,"nodeType":"ArrayExpression","endLine":40,"endColumn":23,"suggestions":[{"desc":"Update the dependencies array to be: [fetchHistoricalData, isOpen, stock]","fix":{"range":[1168,1183],"text":"[fetchHistoricalData, isOpen, stock]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":68,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":68,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2385,2388],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2385,2388],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":74,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":74,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2655,2658],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2655,2658],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":74,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":74,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2683,2686],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2683,2686],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { useEffect, useState } from 'react';\r\nimport { X, TrendingUp, TrendingDown, Calendar, AlertCircle, Loader2 } from 'lucide-react';\r\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, Legend } from 'recharts';\r\nimport { cn } from '../lib/utils';\r\n\r\ninterface StockDetailModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    stock: {\r\n        ticker: string;\r\n        name: string;\r\n        price: number;\r\n        change: number;\r\n        sector?: string;\r\n        history?: { date: string; value: number }[];\r\n    } | null;\r\n}\r\n\r\ninterface ChartPoint {\r\n    date: string;\r\n    history?: number;\r\n    prediction?: number;\r\n}\r\n\r\nexport const StockDetailModal = ({ isOpen, onClose, stock }: StockDetailModalProps) => {\r\n    const [data, setData] = useState<ChartPoint[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [stats, setStats] = useState<{\r\n        high52w: number;\r\n        low52w: number;\r\n        avgPrice: number;\r\n        volatility: number;\r\n    } | null>(null);\r\n\r\n    useEffect(() => {\r\n        if (isOpen && stock) {\r\n            fetchHistoricalData(stock);\r\n        }\r\n    }, [isOpen, stock]);\r\n\r\n    const fetchHistoricalData = async (stockData: NonNullable<typeof stock>) => {\r\n        setLoading(true);\r\n        try {\r\n            // Get current price from stock or history\r\n            let currentPrice = stockData.price;\r\n            if (currentPrice == null && stockData.history && stockData.history.length > 0) {\r\n                const sortedHistory = [...stockData.history].sort((a, b) =>\r\n                    new Date(b.date).getTime() - new Date(a.date).getTime()\r\n                );\r\n                currentPrice = sortedHistory[0].value;\r\n            }\r\n            currentPrice = currentPrice ?? 0;\r\n\r\n            // Fetch OHLC data for the past 5 years (1825 days)\r\n            const response = await fetch(\r\n                `http://localhost:8000/api/v1/market-data/ohlc/${stockData.ticker}?days=1825`\r\n            );\r\n\r\n            let historicalPoints: ChartPoint[] = [];\r\n            let closes: number[] = [];\r\n\r\n            if (response.ok) {\r\n                const ohlcData = await response.json();\r\n\r\n                if (ohlcData && ohlcData.length > 0) {\r\n                    // Convert OHLC data to chart points\r\n                    historicalPoints = ohlcData.map((d: any) => ({\r\n                        date: d.time?.substring(0, 10) || d.bucket?.substring(0, 10),\r\n                        history: d.close\r\n                    }));\r\n\r\n                    // Calculate stats from OHLC data\r\n                    closes = ohlcData.map((d: any) => d.close).filter((p: any) => p != null);\r\n                    if (closes.length > 0) {\r\n                        const high52w = Math.max(...closes);\r\n                        const low52w = Math.min(...closes);\r\n                        const avgPrice = closes.reduce((a: number, b: number) => a + b, 0) / closes.length;\r\n                        // Simple volatility (std dev of daily returns)\r\n                        const returns = closes.slice(1).map((p: number, i: number) => (p - closes[i]) / closes[i]);\r\n                        const avgReturn = returns.length > 0 ? returns.reduce((a: number, b: number) => a + b, 0) / returns.length : 0;\r\n                        const variance = returns.length > 0 ? returns.reduce((a: number, r: number) => a + Math.pow(r - avgReturn, 2), 0) / returns.length : 0;\r\n                        const volatility = Math.sqrt(variance) * Math.sqrt(252) * 100; // Annualized\r\n\r\n                        setStats({ high52w, low52w, avgPrice, volatility: isNaN(volatility) ? 0 : volatility });\r\n                    }\r\n                }\r\n            }\r\n\r\n            // If no OHLC data, use the sparkline history from the stock prop\r\n            if (historicalPoints.length === 0 && stockData.history && stockData.history.length > 0) {\r\n                historicalPoints = stockData.history.map(h => ({\r\n                    date: h.date,\r\n                    history: h.value\r\n                }));\r\n                closes = stockData.history.map(h => h.value);\r\n            }\r\n\r\n            // If still no data, generate from current price (5 years of simulated history)\r\n            if (historicalPoints.length === 0) {\r\n                historicalPoints = generateHistoricalData(currentPrice, 60); // 60 months = 5 years\r\n                closes = historicalPoints.map(p => p.history!);\r\n            }\r\n\r\n            // Generate predictions using linear regression on historical data\r\n            const predictionPoints = generatePredictionsWithRegression(closes, currentPrice);\r\n\r\n            // Combine historical and prediction data\r\n            const combinedData = [...historicalPoints];\r\n\r\n            // Add current price as transition point (has both history and prediction)\r\n            const today = new Date().toISOString().split('T')[0];\r\n            if (combinedData.length > 0) {\r\n                combinedData[combinedData.length - 1].prediction = currentPrice;\r\n            } else {\r\n                combinedData.push({ date: today, history: currentPrice, prediction: currentPrice });\r\n            }\r\n\r\n            // Add prediction points\r\n            combinedData.push(...predictionPoints);\r\n\r\n            setData(combinedData);\r\n        } catch (error) {\r\n            console.error('Failed to fetch historical data:', error);\r\n            // Fallback to generated data\r\n            const fallbackData = generateHistoricalData(currentPrice);\r\n            const predictionPoints = generatePredictions(currentPrice);\r\n            fallbackData[fallbackData.length - 1].prediction = currentPrice;\r\n            setData([...fallbackData, ...predictionPoints]);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // Linear regression helper\r\n    const linearRegression = (prices: number[]): { slope: number; intercept: number } => {\r\n        const n = prices.length;\r\n        if (n < 2) return { slope: 0, intercept: prices[0] || 0 };\r\n\r\n        const xMean = (n - 1) / 2;\r\n        const yMean = prices.reduce((a, b) => a + b, 0) / n;\r\n\r\n        let numerator = 0;\r\n        let denominator = 0;\r\n\r\n        for (let i = 0; i < n; i++) {\r\n            numerator += (i - xMean) * (prices[i] - yMean);\r\n            denominator += (i - xMean) ** 2;\r\n        }\r\n\r\n        const slope = denominator !== 0 ? numerator / denominator : 0;\r\n        const intercept = yMean - slope * xMean;\r\n\r\n        return { slope, intercept };\r\n    };\r\n\r\n    const generateHistoricalData = (currentPrice: number, months: number = 60): ChartPoint[] => {\r\n        const points: ChartPoint[] = [];\r\n        const today = new Date();\r\n        let price = currentPrice * 0.6; // Start lower for 5 year history\r\n\r\n        // Generate history\r\n        for (let i = months; i > 0; i--) {\r\n            const date = new Date(today.getFullYear(), today.getMonth() - i, 1);\r\n            const change = (Math.random() - 0.45) * 0.06; // Slight positive drift\r\n            price = price * (1 + change);\r\n            points.push({\r\n                date: date.toISOString().split('T')[0],\r\n                history: price\r\n            });\r\n        }\r\n        // Ensure last point matches current price\r\n        if (points.length > 0) {\r\n            points[points.length - 1].history = currentPrice;\r\n        }\r\n        return points;\r\n    };\r\n\r\n    const generatePredictionsWithRegression = (historicalPrices: number[], currentPrice: number): ChartPoint[] => {\r\n        const points: ChartPoint[] = [];\r\n        const today = new Date();\r\n\r\n        // Use last 12 months for trend calculation if available\r\n        const recentPrices = historicalPrices.slice(-12);\r\n        const { slope } = linearRegression(recentPrices);\r\n\r\n        // Calculate monthly growth rate from regression\r\n        const avgPrice = recentPrices.reduce((a, b) => a + b, 0) / recentPrices.length;\r\n        const monthlyGrowthRate = avgPrice > 0 ? slope / avgPrice : 0.005;\r\n\r\n        // Add some randomness (Monte Carlo simulation)\r\n        let predPrice = currentPrice;\r\n        const volatility = 0.025; // 2.5% monthly volatility\r\n\r\n        // Generate 24 months (2 years) of predictions\r\n        for (let i = 1; i <= 24; i++) {\r\n            const date = new Date(today.getFullYear(), today.getMonth() + i, 1);\r\n\r\n            // Apply trend with noise\r\n            const trendComponent = monthlyGrowthRate;\r\n            const noiseComponent = (Math.random() - 0.5) * volatility;\r\n            const change = trendComponent + noiseComponent;\r\n\r\n            predPrice = predPrice * (1 + change);\r\n\r\n            points.push({\r\n                date: date.toISOString().split('T')[0],\r\n                prediction: predPrice\r\n            });\r\n        }\r\n        return points;\r\n    };\r\n\r\n    // Legacy function kept for backwards compatibility\r\n    const generatePredictions = (currentPrice: number): ChartPoint[] => {\r\n        const points: ChartPoint[] = [];\r\n        const today = new Date();\r\n        let predPrice = currentPrice;\r\n\r\n        // Generate 24 months (2 years) of predictions\r\n        for (let i = 1; i <= 24; i++) {\r\n            const date = new Date(today.getFullYear(), today.getMonth() + i, 1);\r\n            // Positive outlook with some variance\r\n            const drift = 0.005; // 0.5% monthly drift\r\n            const volatility = 0.03; // 3% monthly volatility\r\n            const change = drift + (Math.random() - 0.5) * volatility;\r\n            predPrice = predPrice * (1 + change);\r\n            points.push({\r\n                date: date.toISOString().split('T')[0],\r\n                prediction: predPrice\r\n            });\r\n        }\r\n        return points;\r\n    };\r\n\r\n    if (!isOpen || !stock) return null;\r\n\r\n    // Ensure price is a number for display\r\n    const displayPrice = stock.price ?? 0;\r\n    const displayChange = stock.change ?? 0;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\r\n            {/* Backdrop */}\r\n            <div\r\n                className=\"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity\"\r\n                onClick={onClose}\r\n            />\r\n\r\n            {/* Modal Content */}\r\n            <div className=\"relative w-full max-w-4xl bg-[#0f172a] border border-white/10 rounded-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200\">\r\n                {/* Header */}\r\n                <div className=\"flex justify-between items-start p-6 border-b border-white/10 bg-white/5\">\r\n                    <div>\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <h2 className=\"text-3xl font-bold text-white tracking-tight\">{stock.ticker}</h2>\r\n                            <span className=\"px-2 py-1 rounded text-xs font-medium bg-blue-500/20 text-blue-400 border border-blue-500/30\">\r\n                                {stock.sector || 'Equities'}\r\n                            </span>\r\n                        </div>\r\n                        <p className=\"text-slate-400 mt-1\">{stock.name}</p>\r\n                    </div>\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"p-2 hover:bg-white/10 rounded-full transition-colors text-slate-400 hover:text-white\"\r\n                    >\r\n                        <X className=\"w-6 h-6\" />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Body */}\r\n                <div className=\"p-6 space-y-6 max-h-[calc(100vh-200px)] overflow-y-auto\">\r\n                    {/* Price Hero + Stats */}\r\n                    <div className=\"flex flex-wrap items-start justify-between gap-4\">\r\n                        <div className=\"flex items-baseline gap-4\">\r\n                            <span className=\"text-5xl font-extrabold text-white\">\r\n                                K{displayPrice.toFixed(2)}\r\n                            </span>\r\n                            <div className={cn(\r\n                                \"flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium\",\r\n                                displayChange >= 0 ? \"bg-emerald-500/20 text-emerald-400\" : \"bg-rose-500/20 text-rose-400\"\r\n                            )}>\r\n                                {displayChange >= 0 ? <TrendingUp className=\"w-4 h-4\" /> : <TrendingDown className=\"w-4 h-4\" />}\r\n                                {Math.abs(displayChange).toFixed(2)}%\r\n                            </div>\r\n                            <span className=\"text-slate-500 text-sm\">Today's Change</span>\r\n                        </div>\r\n\r\n                        {/* Stats Cards */}\r\n                        {stats && (\r\n                            <div className=\"flex gap-3\">\r\n                                <div className=\"bg-white/5 rounded-lg px-3 py-2 text-center border border-white/10\">\r\n                                    <div className=\"text-[10px] text-slate-500 uppercase\">52W High</div>\r\n                                    <div className=\"text-sm font-semibold text-emerald-400\">K{stats.high52w.toFixed(2)}</div>\r\n                                </div>\r\n                                <div className=\"bg-white/5 rounded-lg px-3 py-2 text-center border border-white/10\">\r\n                                    <div className=\"text-[10px] text-slate-500 uppercase\">52W Low</div>\r\n                                    <div className=\"text-sm font-semibold text-rose-400\">K{stats.low52w.toFixed(2)}</div>\r\n                                </div>\r\n                                <div className=\"bg-white/5 rounded-lg px-3 py-2 text-center border border-white/10\">\r\n                                    <div className=\"text-[10px] text-slate-500 uppercase\">Avg Price</div>\r\n                                    <div className=\"text-sm font-semibold text-blue-400\">K{stats.avgPrice.toFixed(2)}</div>\r\n                                </div>\r\n                                <div className=\"bg-white/5 rounded-lg px-3 py-2 text-center border border-white/10\">\r\n                                    <div className=\"text-[10px] text-slate-500 uppercase\">Volatility</div>\r\n                                    <div className=\"text-sm font-semibold text-orange-400\">{stats.volatility.toFixed(1)}%</div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Performance Chart */}\r\n                    <div className=\"bg-black/20 rounded-xl p-4 border border-white/5\">\r\n                        <div className=\"flex justify-between items-center mb-4\">\r\n                            <h3 className=\"text-lg font-semibold text-white flex items-center gap-2\">\r\n                                <Calendar className=\"w-5 h-5 text-indigo-400\" />\r\n                                Performance & Forecast\r\n                            </h3>\r\n                            <div className=\"flex gap-4 text-xs\">\r\n                                <span className=\"flex items-center gap-1.5 text-slate-300\">\r\n                                    <span className=\"w-3 h-3 rounded-full bg-emerald-500\"></span>\r\n                                    Historical (5Y)\r\n                                </span>\r\n                                <span className=\"flex items-center gap-1.5 text-slate-300\">\r\n                                    <span className=\"w-3 h-3 rounded-full bg-indigo-400 border border-indigo-400 border-dashed\"></span>\r\n                                    Forecast (2Y)\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {loading ? (\r\n                            <div className=\"h-[350px] flex items-center justify-center\">\r\n                                <div className=\"text-center\">\r\n                                    <Loader2 className=\"w-8 h-8 animate-spin text-brand-primary mx-auto mb-2\" />\r\n                                    <p className=\"text-sm text-slate-400\">Loading historical data...</p>\r\n                                </div>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"h-[350px] w-full\">\r\n                                <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                                    <LineChart data={data} margin={{ top: 10, right: 30, left: 0, bottom: 0 }}>\r\n                                        <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#334155\" vertical={false} />\r\n                                        <XAxis\r\n                                            dataKey=\"date\"\r\n                                            stroke=\"#94a3b8\"\r\n                                            tickFormatter={(val) => {\r\n                                                const d = new Date(val);\r\n                                                return `${d.toLocaleString('default', { month: 'short' })} '${d.getFullYear().toString().slice(-2)}`;\r\n                                            }}\r\n                                            minTickGap={40}\r\n                                            fontSize={11}\r\n                                        />\r\n                                        <YAxis\r\n                                            stroke=\"#94a3b8\"\r\n                                            domain={['auto', 'auto']}\r\n                                            tickFormatter={(val) => `K${val.toFixed(0)}`}\r\n                                            fontSize={11}\r\n                                        />\r\n                                        <Tooltip\r\n                                            contentStyle={{ backgroundColor: '#0f172a', borderColor: '#334155', color: '#f1f5f9' }}\r\n                                            labelStyle={{ color: '#94a3b8', marginBottom: '0.5rem' }}\r\n                                            labelFormatter={(label) => new Date(label).toLocaleDateString('en-ZM', { year: 'numeric', month: 'long', day: 'numeric' })}\r\n                                            formatter={(val) => [`K${Number(val).toFixed(2)}`]}\r\n                                        />\r\n                                        <Legend />\r\n                                        {/* History Line */}\r\n                                        <Line\r\n                                            name=\"Historical\"\r\n                                            type=\"monotone\"\r\n                                            dataKey=\"history\"\r\n                                            stroke=\"#10b981\"\r\n                                            strokeWidth={2}\r\n                                            dot={false}\r\n                                            activeDot={{ r: 5, fill: '#10b981' }}\r\n                                        />\r\n                                        {/* Prediction Line */}\r\n                                        <Line\r\n                                            name=\"Forecast\"\r\n                                            type=\"monotone\"\r\n                                            dataKey=\"prediction\"\r\n                                            stroke=\"#818cf8\"\r\n                                            strokeWidth={2}\r\n                                            strokeDasharray=\"5 5\"\r\n                                            dot={false}\r\n                                            activeDot={{ r: 5, fill: '#818cf8' }}\r\n                                            connectNulls={true}\r\n                                        />\r\n                                    </LineChart>\r\n                                </ResponsiveContainer>\r\n                            </div>\r\n                        )}\r\n\r\n                        <div className=\"mt-3 flex items-start gap-2 text-xs text-slate-500 bg-blue-500/5 p-2 rounded border border-blue-500/10\">\r\n                            <AlertCircle className=\"w-4 h-4 flex-shrink-0 text-blue-400/70\" />\r\n                            <p>\r\n                                Forecast is generated using trend extrapolation with Monte Carlo simulation.\r\n                                Not financial advice. Past performance does not guarantee future results.\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Mwitw\\OneDrive\\Documents\\GitHub\\Projects\\frontend\\src\\components\\analytics\\RiskProfileCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Mwitw\\OneDrive\\Documents\\GitHub\\Projects\\frontend\\src\\components\\analytics\\TimeScaleRiskCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Mwitw\\OneDrive\\Documents\\GitHub\\Projects\\frontend\\src\\components\\charts\\CandlestickChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Mwitw\\OneDrive\\Documents\\GitHub\\Projects\\frontend\\src\\components\\charts\\YieldCurveChart.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":57,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2807,2810],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2807,2810],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\r\nimport type { YieldCurvePoint, YieldCurveParams } from '../../types/analytics';\r\n\r\ninterface YieldCurveChartProps {\r\n    curveData: YieldCurvePoint[];\r\n    observedData?: YieldCurvePoint[];\r\n    parameters?: YieldCurveParams;\r\n}\r\n\r\nexport const YieldCurveChart = ({ curveData, parameters }: YieldCurveChartProps) => {\r\n    // Combine data for display if needed, but Recharts handles independent series best via multiple components or composited data.\r\n    // For curve + scatter overlay, we can use ComposedChart, but let's stick to LineChart for the curve and standard Dots for observed.\r\n    // Actually, Recharts ComposedChart is best for Line + Scatter.\r\n\r\n    // Let's create a ComposedChart\r\n    // We need to merge observed data or overlay it.\r\n    // Simpler: Just plotting the curve first.\r\n\r\n    return (\r\n        <div className=\"w-full h-[400px] bg-fintech-card p-4 rounded-lg shadow-sm border border-white/10\">\r\n            <h3 className=\"text-lg font-semibold mb-4 text-white\">Nelson-Siegel Yield Curve</h3>\r\n            {parameters && (\r\n                <div className=\"flex gap-4 mb-4 text-xs text-slate-400\">\r\n                    <span>Beta0: {parameters.beta0}</span>\r\n                    <span>Beta1: {parameters.beta1}</span>\r\n                    <span>Beta2: {parameters.beta2}</span>\r\n                    <span>Lambda: {parameters.lambda}</span>\r\n                </div>\r\n            )}\r\n\r\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                <LineChart\r\n                    data={curveData}\r\n                    margin={{\r\n                        top: 5,\r\n                        right: 30,\r\n                        left: 20,\r\n                        bottom: 5,\r\n                    }}\r\n                >\r\n                    <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#334155\" opacity={0.3} />\r\n                    <XAxis\r\n                        dataKey=\"ttm\"\r\n                        label={{ value: 'Maturity (Years)', position: 'insideBottomRight', offset: -10, fill: '#94a3b8' }}\r\n                        type=\"number\"\r\n                        domain={[0, 'dataMax']}\r\n                        tickCount={10}\r\n                        stroke=\"#94a3b8\"\r\n                    />\r\n                    <YAxis\r\n                        label={{ value: 'Yield (%)', angle: -90, position: 'insideLeft', fill: '#94a3b8' }}\r\n                        domain={['auto', 'auto']}\r\n                        stroke=\"#94a3b8\"\r\n                    />\r\n                    <Tooltip\r\n                        contentStyle={{ backgroundColor: '#0f172a', borderRadius: '8px', border: '1px solid #334155', color: '#f1f5f9' }}\r\n                        formatter={(value: any) => [`${Number(value).toFixed(2)}%`, 'Yield']}\r\n                        labelFormatter={(label) => `${label} Years`}\r\n                    />\r\n                    <Legend wrapperStyle={{ color: '#94a3b8' }} />\r\n                    <Line\r\n                        type=\"monotone\"\r\n                        dataKey=\"yield\"\r\n                        stroke=\"#8b5cf6\"\r\n                        strokeWidth={3}\r\n                        dot={false}\r\n                        name=\"Fitted Curve\"\r\n                        activeDot={{ r: 8 }}\r\n                    />\r\n                    {/* Overlay Observed Data if Recharts allows easily multiple sources? \r\n                         It usually requires unified data. \r\n                         Let's skip observed points for now to keep it simple, or add them as ReferenceDots if few.\r\n                     */}\r\n                </LineChart>\r\n            </ResponsiveContainer>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Mwitw\\OneDrive\\Documents\\GitHub\\Projects\\frontend\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Mwitw\\OneDrive\\Documents\\GitHub\\Projects\\frontend\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Mwitw\\OneDrive\\Documents\\GitHub\\Projects\\frontend\\src\\pages\\AnalyticsDashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":53,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2002,2005],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2002,2005],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'ticker'. Either include it or remove the dependency array.","line":61,"column":8,"nodeType":"ArrayExpression","endLine":61,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [ticker]","fix":{"range":[2224,2226],"text":"[ticker]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { YieldCurveChart } from '../components/charts/YieldCurveChart';\r\nimport { CandlestickChart } from '../components/charts/CandlestickChart';\r\nimport { RiskProfileCard } from '../components/analytics/RiskProfileCard';\r\nimport { TimeScaleRiskCard } from '../components/analytics/TimeScaleRiskCard';\r\nimport { analyticsService } from '../services/analytics';\r\nimport type { YieldCurveResponse, OHLCData, CAPMResponse } from '../types/analytics';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { ArrowLeft, AlertCircle } from 'lucide-react';\r\n\r\n// Temporary mapping until backend endpoints return IDs\r\nconst TICKER_MAP: Record<string, number> = {\r\n    'ZNCO': 39,\r\n    'MAFS': 40,\r\n    'AECI': 33,\r\n    'CECZ': 43,\r\n    'ATEL': 36,\r\n    'SCBL': 38,\r\n    'BATA': 47,\r\n    'SHOP': 54,\r\n    'ZCCM': 34\r\n};\r\n\r\nconst BENCHMARK_ID = 34; // ZCCM as benchmark\r\n\r\nexport const AnalyticsDashboard = () => {\r\n    const navigate = useNavigate();\r\n    // State\r\n    const [ticker, setTicker] = useState('ZNCO');\r\n    const [yieldData, setYieldData] = useState<YieldCurveResponse | null>(null);\r\n    const [ohlcData, setOhlcData] = useState<OHLCData[] | null>(null);\r\n    const [capmData, setCapmData] = useState<CAPMResponse | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    // Initial Load (Yield Curve + Default Stock)\r\n    useEffect(() => {\r\n        const loadData = async () => {\r\n            setLoading(true);\r\n            try {\r\n                // Fetch Yield Curve\r\n                try {\r\n                    const yc = await analyticsService.getYieldCurve();\r\n                    setYieldData(yc);\r\n                } catch (e) {\r\n                    console.error(\"Failed to load yield curve\", e);\r\n                }\r\n\r\n                // Fetch Stock Data\r\n                await loadStockData(ticker);\r\n\r\n                setError(null);\r\n            } catch (err: any) {\r\n                setError('Failed to load analytics data.');\r\n                console.error(err);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        loadData();\r\n    }, []);\r\n\r\n    // Load Stock Specific Data\r\n    const loadStockData = async (sym: string) => {\r\n        const [ohlc, capm] = await Promise.all([\r\n            analyticsService.getOHLC(sym, 90), // Last 90 days candles\r\n            analyticsService.getCAPM(sym)\r\n        ]);\r\n        setOhlcData(ohlc);\r\n        setCapmData(capm);\r\n    };\r\n\r\n    const handleTickerChange = async (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n        const newTicker = e.target.value;\r\n        setTicker(newTicker);\r\n        setLoading(true);\r\n        try {\r\n            await loadStockData(newTicker);\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (loading && !yieldData) return <div className=\"min-h-screen bg-fintech-bg p-8 text-center text-white\">Loading Analytics...</div>;\r\n    if (error) return <div className=\"min-h-screen bg-fintech-bg p-8 text-center text-red-400\">Error: {error}</div>;\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-fintech-bg p-6 space-y-8 animate-fade-in\">\r\n            <div className=\"flex items-center gap-4\">\r\n                <button\r\n                    onClick={() => navigate('/')}\r\n                    className=\"p-2 bg-fintech-card border border-white/10 rounded-lg text-slate-400 hover:text-white hover:border-white/30 transition-colors\"\r\n                    title=\"Back to Dashboard\"\r\n                >\r\n                    <ArrowLeft className=\"w-5 h-5\" />\r\n                </button>\r\n                <div className=\"flex-1 flex justify-between items-center\">\r\n                    <div>\r\n                        <h1 className=\"text-2xl font-bold text-white\">Advanced Analytics</h1>\r\n                        <p className=\"text-slate-400\">Quantitative modeling and risk assessment</p>\r\n                    </div>\r\n\r\n                    {/* Simple Ticker Selector */}\r\n                    <select\r\n                        value={ticker}\r\n                        onChange={handleTickerChange}\r\n                        className=\"p-2 border border-white/20 rounded-md shadow-sm bg-fintech-card text-white\"\r\n                    >\r\n                        {Object.keys(TICKER_MAP).map(t => (\r\n                            <option key={t} value={t}>{t}</option>\r\n                        ))}\r\n                    </select>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Section 1: Macro (Yield Curve) */}\r\n            <section>\r\n                <div className=\"mb-4 flex items-center gap-2\">\r\n                    <h2 className=\"text-xl font-semibold text-white\">Macro: Yield Curve</h2>\r\n                    {yieldData?.parameters && <span className=\"text-xs bg-blue-500/20 text-blue-400 px-2 py-0.5 rounded\">Nelson-Siegel Fit</span>}\r\n                </div>\r\n                {yieldData ? (\r\n                    <YieldCurveChart\r\n                        curveData={yieldData.curve}\r\n                        observedData={yieldData.observed}\r\n                        parameters={yieldData.parameters}\r\n                    />\r\n                ) : (\r\n                    <div className=\"h-64 bg-white/5 rounded flex items-center justify-center text-slate-400\">\r\n                        Yield Curve Data Unavailable\r\n                    </div>\r\n                )}\r\n            </section>\r\n\r\n            {/* Section 2: Asset Analysis (CAPM & Charts) */}\r\n            <section className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                {/* Left: Chart */}\r\n                <div className=\"lg:col-span-2 space-y-4\">\r\n                    <h2 className=\"text-xl font-semibold text-white\">Price Action: {ticker}</h2>\r\n                    <div className=\"bg-fintech-card p-4 rounded-lg shadow-sm border border-white/10 h-[450px]\">\r\n                        {ohlcData && ohlcData.length > 0 ? (\r\n                            <CandlestickChart data={ohlcData} height={400} />\r\n                        ) : (\r\n                            <div className=\"h-full flex items-center justify-center text-slate-400\">\r\n                                <AlertCircle className=\"w-5 h-5 mr-2\" />\r\n                                No Chart Data\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Right: Risk Cards */}\r\n                <div className=\"space-y-4\">\r\n                    <h2 className=\"text-xl font-semibold text-white\">Risk Profile</h2>\r\n\r\n                    {/* New TimescaleDB Risk Card (Interactive) */}\r\n                    {TICKER_MAP[ticker] && (\r\n                        <TimeScaleRiskCard\r\n                            assetId={TICKER_MAP[ticker]}\r\n                            benchmarkId={BENCHMARK_ID}\r\n                            ticker={ticker}\r\n                        />\r\n                    )}\r\n\r\n                    {/* Legacy/Overview Card */}\r\n                    {capmData ? (\r\n                        <RiskProfileCard data={capmData} />\r\n                    ) : (\r\n                        <div className=\"h-40 bg-white/5 rounded flex items-center justify-center text-slate-400\">\r\n                            Calculating Metrics...\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"bg-blue-500/10 p-4 rounded-lg text-sm text-blue-300 border border-blue-500/20\">\r\n                        <strong>Methodology Note:</strong><br />\r\n                        ΓÇó Beta: 1Y regression vs LuSE All-Share.<br />\r\n                        ΓÇó Liquidity: Penalty applied if daily vol &lt; ZMW 100k.<br />\r\n                        ΓÇó Yield Curve: Fitted to GRZ bonds (2Y-15Y).\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Mwitw\\OneDrive\\Documents\\GitHub\\Projects\\frontend\\src\\pages\\BacktestStrategy.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":15,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[611,614],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[611,614],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":29,"column":9,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":29,"endColumn":22,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[1110,1123],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":46,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1673,1676],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1673,1676],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":147,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":147,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7798,7801],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7798,7801],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { analyticsService } from '../services/analytics';\r\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\r\nimport { RefreshCw, Play } from 'lucide-react';\r\n\r\ninterface AssetWeight {\r\n    ticker: string;\r\n    weight: number;\r\n}\r\n\r\nexport const BacktestStrategy = () => {\r\n    const [assets, setAssets] = useState<AssetWeight[]>([{ ticker: 'ZNCO', weight: 1.0 }]);\r\n    const [startDate, setStartDate] = useState('2023-01-01');\r\n    const [capital, setCapital] = useState(10000);\r\n    const [result, setResult] = useState<any>(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const handleAddAsset = () => {\r\n        setAssets([...assets, { ticker: '', weight: 0 }]);\r\n    };\r\n\r\n    const handleRemoveAsset = (index: number) => {\r\n        setAssets(assets.filter((_, i) => i !== index));\r\n    };\r\n\r\n    const updateAsset = (index: number, field: keyof AssetWeight, value: string | number) => {\r\n        const newAssets = [...assets];\r\n        // @ts-ignore\r\n        newAssets[index][field] = value;\r\n        setAssets(newAssets);\r\n    };\r\n\r\n    const runBacktest = async () => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            // Convert array to dict\r\n            const weights: Record<string, number> = {};\r\n            assets.forEach(a => {\r\n                if (a.ticker) weights[a.ticker] = Number(a.weight);\r\n            });\r\n\r\n            const res = await analyticsService.runBacktest(weights, startDate, capital);\r\n            setResult(res);\r\n        } catch (err: any) {\r\n            setError(err.response?.data?.detail || 'Backtest failed');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-fintech-bg space-y-6 animate-fade-in p-6\">\r\n            <h1 className=\"text-2xl font-bold text-white\">Strategy Backtester</h1>\r\n            <p className=\"text-slate-400\">Simulate portfolio performance using historical data.</p>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                {/* Controls */}\r\n                <div className=\"bg-fintech-card p-6 rounded-lg shadow-sm border border-white/10 space-y-4 h-fit\">\r\n                    <h2 className=\"text-lg font-semibold text-white\">Configuration</h2>\r\n\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-slate-300\">Initial Capital</label>\r\n                        <input\r\n                            type=\"number\"\r\n                            value={capital}\r\n                            onChange={(e) => setCapital(Number(e.target.value))}\r\n                            className=\"mt-1 block w-full rounded-md border-white/20 bg-white/10 shadow-sm p-2 border text-white\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-slate-300\">Start Date</label>\r\n                        <input\r\n                            type=\"date\"\r\n                            value={startDate}\r\n                            onChange={(e) => setStartDate(e.target.value)}\r\n                            className=\"mt-1 block w-full rounded-md border-white/20 bg-white/10 shadow-sm p-2 border text-white\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2\">\r\n                        <label className=\"block text-sm font-medium text-slate-300\">Portfolio Allocation</label>\r\n                        {assets.map((asset, idx) => (\r\n                            <div key={idx} className=\"flex gap-2\">\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Ticker (e.g. ZNCO)\"\r\n                                    value={asset.ticker}\r\n                                    onChange={(e) => updateAsset(idx, 'ticker', e.target.value)}\r\n                                    className=\"flex-1 rounded-md border-white/20 bg-white/10 shadow-sm p-2 border uppercase text-white placeholder-slate-500\"\r\n                                />\r\n                                <input\r\n                                    type=\"number\"\r\n                                    placeholder=\"Wgt (0-1)\"\r\n                                    value={asset.weight}\r\n                                    onChange={(e) => updateAsset(idx, 'weight', e.target.value)}\r\n                                    className=\"w-24 rounded-md border-white/20 bg-white/10 shadow-sm p-2 border text-white\"\r\n                                />\r\n                                {assets.length > 1 && (\r\n                                    <button onClick={() => handleRemoveAsset(idx)} className=\"text-red-400 px-2 hover:text-red-300\">├ù</button>\r\n                                )}\r\n                            </div>\r\n                        ))}\r\n                        <button onClick={handleAddAsset} className=\"text-sm text-blue-400 hover:text-blue-300\">\r\n                            + Add Asset\r\n                        </button>\r\n                    </div>\r\n\r\n                    <button\r\n                        onClick={runBacktest}\r\n                        disabled={loading}\r\n                        className=\"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:opacity-50 flex items-center justify-center gap-2\"\r\n                    >\r\n                        {loading ? <RefreshCw className=\"animate-spin w-4 h-4\" /> : <Play className=\"w-4 h-4\" />}\r\n                        Run Backtest\r\n                    </button>\r\n\r\n                    {error && (\r\n                        <div className=\"p-3 bg-red-500/10 text-red-400 text-sm rounded-md border border-red-500/20\">\r\n                            {error}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Results */}\r\n                <div className=\"lg:col-span-2 space-y-6\">\r\n                    {result ? (\r\n                        <>\r\n                            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                                <MetricCard label=\"Total Return\" value={`${(result.metrics.total_return * 100).toFixed(2)}%`} color={result.metrics.total_return >= 0 ? \"text-green-400\" : \"text-red-400\"} />\r\n                                <MetricCard label=\"CAGR\" value={`${(result.metrics.cagr * 100).toFixed(2)}%`} />\r\n                                <MetricCard label=\"Sharpe Ratio\" value={result.metrics.sharpe_ratio} />\r\n                                <MetricCard label=\"Max Drawdown\" value={`${(result.metrics.max_drawdown * 100).toFixed(2)}%`} color=\"text-red-400\" />\r\n                            </div>\r\n\r\n                            <div className=\"bg-fintech-card p-4 rounded-lg shadow-sm border border-white/10 h-[400px]\">\r\n                                <h3 className=\"text-lg font-semibold mb-4 text-white\">Equity Curve</h3>\r\n                                <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                                    <LineChart data={result.equity_curve}>\r\n                                        <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#334155\" />\r\n                                        <XAxis dataKey=\"time\" tickFormatter={(t) => t.substring(0, 10)} minTickGap={30} stroke=\"#94a3b8\" />\r\n                                        <YAxis domain={['auto', 'auto']} stroke=\"#94a3b8\" />\r\n                                        <Tooltip\r\n                                            labelFormatter={(l) => l.substring(0, 10)}\r\n                                            formatter={(val: any) => [`${val?.toFixed(2)} ZMW`, 'Equity']}\r\n                                            contentStyle={{ backgroundColor: '#0f172a', borderColor: '#334155' }}\r\n                                        />\r\n                                        <Line type=\"monotone\" dataKey=\"value\" stroke=\"#38bdf8\" strokeWidth={2} dot={false} />\r\n                                    </LineChart>\r\n                                </ResponsiveContainer>\r\n                            </div>\r\n                        </>\r\n                    ) : (\r\n                        <div className=\"h-full flex flex-col items-center justify-center text-slate-500 border-2 border-dashed border-white/10 rounded-lg py-20\">\r\n                            <Play className=\"w-12 h-12 mb-2 opacity-20\" />\r\n                            <p>Configure portfolio and run backtest to see results</p>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst MetricCard = ({ label, value, color = \"text-white\" }: { label: string, value: string | number, color?: string }) => (\r\n    <div className=\"bg-fintech-card p-4 rounded-lg shadow-sm border border-white/10\">\r\n        <div className=\"text-sm text-slate-400\">{label}</div>\r\n        <div className={`text-xl font-bold ${color}`}>{value}</div>\r\n    </div>\r\n);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Mwitw\\OneDrive\\Documents\\GitHub\\Projects\\frontend\\src\\services\\analytics.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Mwitw\\OneDrive\\Documents\\GitHub\\Projects\\frontend\\src\\services\\api.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":149,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":149,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import axios from 'axios';\r\nimport { authService } from './authService';\r\n\r\nconst API_BASE_URL = import.meta.env.VITE_API_URL || 'http://localhost:8000';\r\n\r\nconst api = axios.create({\r\n    baseURL: `${API_BASE_URL}/api/v1`,\r\n    timeout: 30000, // 30 second timeout\r\n});\r\n\r\n// Request interceptor to add auth token\r\napi.interceptors.request.use(\r\n    (config) => {\r\n        const token = authService.getToken();\r\n        if (token) {\r\n            config.headers.Authorization = `Bearer ${token}`;\r\n        }\r\n        return config;\r\n    },\r\n    (error) => {\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\n// Response interceptor to handle auth errors\r\napi.interceptors.response.use(\r\n    (response) => response,\r\n    (error) => {\r\n        if (error.response?.status === 401) {\r\n            // Token expired or invalid - logout user\r\n            const currentPath = window.location.pathname;\r\n            if (currentPath !== '/login' && currentPath !== '/register') {\r\n                authService.logout();\r\n                window.location.href = '/login';\r\n            }\r\n        }\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\n// ============ VALUATION ENDPOINTS ============\r\nexport const valuationAPI = {\r\n    // Bond pricing\r\n    bondPrice: async (payload: {\r\n        face_value: number;\r\n        coupon_rate: number;\r\n        yield_rate: number;\r\n        years_to_maturity: number;\r\n        frequency?: number;\r\n    }) => {\r\n        const response = await api.post('/valuation/bond/price', payload);\r\n        return response.data;\r\n    },\r\n\r\n    // YTM calculation\r\n    bondYTM: async (payload: {\r\n        face_value: number;\r\n        coupon_rate: number;\r\n        current_price: number;\r\n        years_to_maturity: number;\r\n        frequency?: number;\r\n    }) => {\r\n        const response = await api.post('/valuation/bond/ytm', payload);\r\n        return response.data;\r\n    },\r\n\r\n    // DCF Valuation\r\n    dcfValuation: async (payload: {\r\n        initial_fcf: number;\r\n        growth_rate: number;\r\n        discount_rate: number;\r\n        forecast_years: number;\r\n        terminal_growth?: number;\r\n    }) => {\r\n        const response = await api.post('/valuation/equity/dcf', payload);\r\n        return response.data;\r\n    },\r\n\r\n    // Annuity PV\r\n    annuityPV: async (type: string, annuityPayment: number, rate: number, periods: number) => {\r\n        const response = await api.get(`/valuation/annuity/${type}`, {\r\n            params: { annuity_payment: annuityPayment, rate, periods }\r\n        });\r\n        return response.data;\r\n    }\r\n};\r\n\r\n// ============ PORTFOLIO OPTIMIZATION ENDPOINTS ============\r\nexport const optimizationAPI = {\r\n    // Portfolio optimization\r\n    optimize: async (payload: {\r\n        returns_data: Record<string, number[]>;\r\n        objective: 'max_sharpe' | 'min_vol' | 'equal_weight';\r\n        risk_free_rate: number;\r\n        target_return?: number;\r\n    }) => {\r\n        const response = await api.post('/optimization/optimize', payload);\r\n        return response.data;\r\n    },\r\n\r\n    // Efficient frontier\r\n    efficientFrontier: async (payload: {\r\n        returns_data: Record<string, number[]>;\r\n        n_points?: number;\r\n        risk_free_rate?: number;\r\n    }) => {\r\n        const response = await api.post('/optimization/efficient-frontier', payload);\r\n        return response.data;\r\n    },\r\n\r\n    // Beta calculation\r\n    calculateBeta: async (payload: {\r\n        asset_returns: number[];\r\n        market_returns: number[];\r\n    }) => {\r\n        const response = await api.post('/optimization/beta', payload);\r\n        return response.data;\r\n    }\r\n};\r\n\r\n// ============ RISK ANALYTICS ENDPOINTS ============\r\nexport const riskAPI = {\r\n    // Value at Risk\r\n    valueAtRisk: async (payload: {\r\n        returns: number[];\r\n        confidence_level: number;\r\n        method: 'historical' | 'parametric' | 'monte_carlo';\r\n    }) => {\r\n        const response = await api.post('/optimization/risk/var', payload);\r\n        return response.data;\r\n    },\r\n\r\n    // Conditional VaR\r\n    conditionalVaR: async (payload: {\r\n        returns: number[];\r\n        confidence_level: number;\r\n        method: 'historical' | 'parametric';\r\n    }) => {\r\n        const response = await api.post('/optimization/risk/cvar', payload);\r\n        return response.data;\r\n    }\r\n};\r\n\r\n// ============ HEALTH CHECK ============\r\nexport const healthCheck = async () => {\r\n    try {\r\n        const response = await axios.get(`${API_BASE_URL}/`);\r\n        return response.data;\r\n    } catch (error) {\r\n        throw new Error('Backend is not responding');\r\n    }\r\n};\r\n\r\nexport default api;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Mwitw\\OneDrive\\Documents\\GitHub\\Projects\\frontend\\src\\services\\authService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Mwitw\\OneDrive\\Documents\\GitHub\\Projects\\frontend\\src\\types\\analytics.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Mwitw\\OneDrive\\Documents\\GitHub\\Projects\\frontend\\tailwind.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Mwitw\\OneDrive\\Documents\\GitHub\\Projects\\frontend\\vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
